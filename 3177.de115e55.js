"use strict";(self.webpackChunksmartevents_ui=self.webpackChunksmartevents_ui||[]).push([[3177],{31527:(e,t,n)=>{n.d(t,{Re:()=>v,LL:()=>f,VK:()=>I,gj:()=>L,XN:()=>w.X,dU:()=>T,OS:()=>C});var a=n(70655),r=n(9669),o=n.n(r);const s="https://api.stage.openshift.com".replace(/\/+$/,"");class i{constructor(e,t=s,n=o()){this.basePath=t,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class l extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const c="https://example.com",m=function(e,t,n){if(null==n)throw new l(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},u=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},d=function(e,...t){const n=new URLSearchParams(e.search);for(const e of t)for(const t in e)if(Array.isArray(e[t])){n.delete(t);for(const a of e[t])n.append(t,a)}else n.set(t,e[t]);e.search=n.toString()},p=function(e,t,n){const a="string"!=typeof e;return(a&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):a)?JSON.stringify(void 0!==e?e:{}):e||""},g=function(e){return e.pathname+e.search+e.hash},E=function(e,t,n,a){return(r=t,o=n)=>{const s=Object.assign(Object.assign({},e.options),{url:((null==a?void 0:a.basePath)||o)+e.url});return r.request(s)}},h=function(e){const t=function(e){return{createBridge:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=new URL("/api/smartevents_mgmt/v1/bridges",c);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"POST"},r),n),s={};yield u(s,e),s["Content-Type"]="application/json",d(a,{});let i=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),i),n.headers),o.data=p(t,o,e),{url:g(a),options:o}})),deleteBridge:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("deleteBridge","bridgeId",t);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}".replace("{bridgeId}",encodeURIComponent(String(t))),r=new URL(a,c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"DELETE"},o),n),i={};yield u(i,e),d(r,{});let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},i),l),n.headers),{url:g(r),options:s}})),getBridge:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("getBridge","bridgeId",t);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}".replace("{bridgeId}",encodeURIComponent(String(t))),r=new URL(a,c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),i={};yield u(i,e),d(r,{});let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},i),l),n.headers),{url:g(r),options:s}})),getBridges:(t,n,r,o,s={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=new URL("/api/smartevents_mgmt/v1/bridges",c);let i;e&&(i=e.baseOptions);const l=Object.assign(Object.assign({method:"GET"},i),s),m={},p={};yield u(m,e),void 0!==t&&(p.name=t),void 0!==n&&(p.page=n),void 0!==r&&(p.size=r),o&&(p.status=Array.from(o)),d(a,p);let E=i&&i.headers?i.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},m),E),s.headers),{url:g(a),options:l}}))}}(e);return{createBridge(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.createBridge(n,r);return E(a,o(),s,e)}))},deleteBridge(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.deleteBridge(n,r);return E(a,o(),s,e)}))},getBridge(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getBridge(n,r);return E(a,o(),s,e)}))},getBridges(n,r,i,l,c){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getBridges(n,r,i,l,c);return E(a,o(),s,e)}))}}};class v extends i{createBridge(e,t){return h(this.configuration).createBridge(e,t).then((e=>e(this.axios,this.basePath)))}deleteBridge(e,t){return h(this.configuration).deleteBridge(e,t).then((e=>e(this.axios,this.basePath)))}getBridge(e,t){return h(this.configuration).getBridge(e,t).then((e=>e(this.axios,this.basePath)))}getBridges(e,t,n,a,r){return h(this.configuration).getBridges(e,t,n,a,r).then((e=>e(this.axios,this.basePath)))}}const b=function(e){const t=function(e){return{getCloudProvider:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("getCloudProvider","id",t);const a="/api/smartevents_mgmt/v1/cloud_providers/{id}".replace("{id}",encodeURIComponent(String(t))),r=new URL(a,c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n);d(r,{});let i=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),i),n.headers),{url:g(r),options:s}})),listCloudProviderRegions:(t,n,r,o={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("listCloudProviderRegions","id",t);const a="/api/smartevents_mgmt/v1/cloud_providers/{id}/regions".replace("{id}",encodeURIComponent(String(t))),s=new URL(a,c);let i;e&&(i=e.baseOptions);const l=Object.assign(Object.assign({method:"GET"},i),o),u={};void 0!==n&&(u.page=n),void 0!==r&&(u.size=r),d(s,u);let p=i&&i.headers?i.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},{}),p),o.headers),{url:g(s),options:l}})),listCloudProviders:(t,n,r={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=new URL("/api/smartevents_mgmt/v1/cloud_providers",c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),r),i={};void 0!==t&&(i.page=t),void 0!==n&&(i.size=n),d(a,i);let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),l),r.headers),{url:g(a),options:s}}))}}(e);return{getCloudProvider(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getCloudProvider(n,r);return E(a,o(),s,e)}))},listCloudProviderRegions(n,r,i,l){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.listCloudProviderRegions(n,r,i,l);return E(a,o(),s,e)}))},listCloudProviders(n,r,i){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.listCloudProviders(n,r,i);return E(a,o(),s,e)}))}}};class f extends i{getCloudProvider(e,t){return b(this.configuration).getCloudProvider(e,t).then((e=>e(this.axios,this.basePath)))}listCloudProviderRegions(e,t,n,a){return b(this.configuration).listCloudProviderRegions(e,t,n,a).then((e=>e(this.axios,this.basePath)))}listCloudProviders(e,t,n){return b(this.configuration).listCloudProviders(e,t,n).then((e=>e(this.axios,this.basePath)))}}const S=function(e){const t=function(e){return{addProcessorToBridge:(t,n,r={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("addProcessorToBridge","bridgeId",t);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}/processors".replace("{bridgeId}",encodeURIComponent(String(t))),o=new URL(a,c);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"POST"},s),r),l={};yield u(l,e),l["Content-Type"]="application/json",d(o,{});let E=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},l),E),r.headers),i.data=p(n,i,e),{url:g(o),options:i}})),deleteProcessor:(t,n,r={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("deleteProcessor","bridgeId",t),m("deleteProcessor","processorId",n);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(n))),o=new URL(a,c);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"DELETE"},s),r),l={};yield u(l,e),d(o,{});let p=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},l),p),r.headers),{url:g(o),options:i}})),getProcessor:(t,n,r={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("getProcessor","bridgeId",t),m("getProcessor","processorId",n);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(n))),o=new URL(a,c);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},s),r),l={};yield u(l,e),d(o,{});let p=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},l),p),r.headers),{url:g(o),options:i}})),listProcessors:(t,n,r,o,s,i,l={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("listProcessors","bridgeId",t);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}/processors".replace("{bridgeId}",encodeURIComponent(String(t))),p=new URL(a,c);let E;e&&(E=e.baseOptions);const h=Object.assign(Object.assign({method:"GET"},E),l),v={},b={};yield u(v,e),void 0!==n&&(b.name=n),void 0!==r&&(b.page=r),void 0!==o&&(b.size=o),s&&(b.status=Array.from(s)),void 0!==i&&(b.type=i),d(p,b);let f=E&&E.headers?E.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),f),l.headers),{url:g(p),options:h}})),updateProcessor:(t,n,r,o={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("updateProcessor","bridgeId",t),m("updateProcessor","processorId",n);const a="/api/smartevents_mgmt/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(n))),s=new URL(a,c);let i;e&&(i=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},i),o),E={};yield u(E,e),E["Content-Type"]="application/json",d(s,{});let h=i&&i.headers?i.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},E),h),o.headers),l.data=p(r,l,e),{url:g(s),options:l}}))}}(e);return{addProcessorToBridge(n,r,i){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.addProcessorToBridge(n,r,i);return E(a,o(),s,e)}))},deleteProcessor(n,r,i){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.deleteProcessor(n,r,i);return E(a,o(),s,e)}))},getProcessor(n,r,i){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getProcessor(n,r,i);return E(a,o(),s,e)}))},listProcessors(n,r,i,l,c,m,u){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.listProcessors(n,r,i,l,c,m,u);return E(a,o(),s,e)}))},updateProcessor(n,r,i,l){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.updateProcessor(n,r,i,l);return E(a,o(),s,e)}))}}};class T extends i{addProcessorToBridge(e,t,n){return S(this.configuration).addProcessorToBridge(e,t,n).then((e=>e(this.axios,this.basePath)))}deleteProcessor(e,t,n){return S(this.configuration).deleteProcessor(e,t,n).then((e=>e(this.axios,this.basePath)))}getProcessor(e,t,n){return S(this.configuration).getProcessor(e,t,n).then((e=>e(this.axios,this.basePath)))}listProcessors(e,t,n,a,r,o,s){return S(this.configuration).listProcessors(e,t,n,a,r,o,s).then((e=>e(this.axios,this.basePath)))}updateProcessor(e,t,n,a){return S(this.configuration).updateProcessor(e,t,n,a).then((e=>e(this.axios,this.basePath)))}}const y=function(e){const t=function(e){return{getActionProcessorSchema:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("getActionProcessorSchema","id",t);const a="/api/smartevents_mgmt/v1/schemas/actions/{id}".replace("{id}",encodeURIComponent(String(t))),r=new URL(a,c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),i={};yield u(i,e),d(r,{});let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},i),l),n.headers),{url:g(r),options:s}})),getCatalog:(t={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){const n=new URL("/api/smartevents_mgmt/v1/schemas",c);let a;e&&(a=e.baseOptions);const r=Object.assign(Object.assign({method:"GET"},a),t),o={};yield u(o,e),d(n,{});let s=a&&a.headers?a.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},o),s),t.headers),{url:g(n),options:r}})),getSourceProcessorSchema:(t,n={})=>(0,a.__awaiter)(this,void 0,void 0,(function*(){m("getSourceProcessorSchema","id",t);const a="/api/smartevents_mgmt/v1/schemas/sources/{id}".replace("{id}",encodeURIComponent(String(t))),r=new URL(a,c);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),i={};yield u(i,e),d(r,{});let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},i),l),n.headers),{url:g(r),options:s}}))}}(e);return{getActionProcessorSchema(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getActionProcessorSchema(n,r);return E(a,o(),s,e)}))},getCatalog(n){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getCatalog(n);return E(a,o(),s,e)}))},getSourceProcessorSchema(n,r){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=yield t.getSourceProcessorSchema(n,r);return E(a,o(),s,e)}))}}};class C extends i{getActionProcessorSchema(e,t){return y(this.configuration).getActionProcessorSchema(e,t).then((e=>e(this.axios,this.basePath)))}getCatalog(e){return y(this.configuration).getCatalog(e).then((e=>e(this.axios,this.basePath)))}getSourceProcessorSchema(e,t){return y(this.configuration).getSourceProcessorSchema(e,t).then((e=>e(this.axios,this.basePath)))}}class I{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}const L={Accepted:"accepted",Preparing:"preparing",Provisioning:"provisioning",Ready:"ready",Deprovision:"deprovision",Deleting:"deleting",Deleted:"deleted",Failed:"failed"};var w=n(15903)},33177:(e,t,n)=>{n.d(t,{Z:()=>He});var a=n(75418),r=n.n(a),o=n(98068),s=n(99922),i=n(39799);const l=({path:e})=>r().createElement(s.Breadcrumb,{ouiaId:"breadcrumb"},e.map(((t,n)=>{const a=n===e.length-1;return r().createElement(s.BreadcrumbItem,{"data-ouia-component-type":"breadcrumb-item","data-ouia-component-id":t.label,key:n,isActive:a,render:({className:e})=>t.linkTo?r().createElement(o.Link,{to:t.linkTo,className:e},t.label):t.label})})));var c=n(67646),m=n(28251),u=n(22013);const d=({ariaLabel:e="Table",columns:t,cssClasses:n,rows:a,variant:o,children:s,renderActions:i})=>r().createElement(m.TableComposable,{className:(0,u.css)(n),variant:o,"aria-label":e,ouiaId:e},r().createElement(m.Thead,null,r().createElement(m.Tr,{ouiaId:"table-head"},(e=>e.map((e=>e.label)))(t).map((e=>r().createElement(m.Th,{key:e},e))))),!a.length&&s?r().createElement(m.Tbody,null,r().createElement(m.Tr,{ouiaId:"no-data"},r().createElement(m.Td,{colSpan:t.length},s))):r().createElement(m.Tbody,null,((e,t)=>e.map((e=>({cells:t.map((t=>{var n;const a=t.accessor;return(null!==(n=t.formatter)&&void 0!==n?n:e=>e)(e[a],e)})),originalData:e}))))(a,t).map(((e,t)=>{var n,a,o,s;return r().createElement(m.Tr,{ouiaId:null===(n=e.originalData)||void 0===n?void 0:n.name,key:null!==(o=null===(a=e.originalData)||void 0===a?void 0:a.id)&&void 0!==o?o:t},null===(s=null==e?void 0:e.cells)||void 0===s?void 0:s.map(((e,t)=>r().createElement(m.Td,{key:t},e))),i&&r().createElement(m.Td,{className:"pf-c-table__action"},i({row:e,ActionsColumn:m.ActionsColumn})))})))),p=({className:e,itemCount:t,page:n,perPage:a,onChange:o,isCompact:i=!1,variant:l,ouiaId:c})=>r().createElement(s.Pagination,{"data-ouia-component-type":"pagination-control",ouiaId:c,className:e,style:{float:"right"},itemCount:t,page:n,perPage:a,perPageOptions:[{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],onSetPage:(e,t)=>o(t,a),onPerPageSelect:(e,t)=>o(n,t),isCompact:i,variant:l}),g=({columns:e,totalRows:t,hasActionColumn:n})=>r().createElement(m.TableComposable,{"aria-label":"table-skeleton"},r().createElement(m.Thead,null,r().createElement(m.Tr,null,e.map((e=>r().createElement(m.Th,{key:e.label},e.label))))),r().createElement(m.Tbody,null,[...Array(t).keys()].map((t=>r().createElement(m.Tr,{key:t},e.map(((e,t)=>r().createElement(m.Td,{key:t},r().createElement(s.Skeleton,{key:e.label})))),n&&r().createElement(m.Td,{className:"pf-c-table__action"},r().createElement(m.ActionsColumn,null))))))),E=({columns:e,customToolbarElement:t,isLoading:n,rows:a,totalRows:o,pageNumber:i,pageSize:l,onPaginationChange:c,tableLabel:m,children:u,renderActions:E})=>{const h=e=>r().createElement(p,Object.assign({itemCount:o,page:i+1,perPage:l,isCompact:!e},e?{variant:s.PaginationVariant.bottom}:{},{onChange:(e,t)=>c(e-1,t),ouiaId:e?"rows-bottom":"rows-top"}));return r().createElement(s.Card,{ouiaId:m},r().createElement(s.Toolbar,{ouiaId:"rows-toolbar"},r().createElement(s.ToolbarContent,null,r().createElement(s.ToolbarItem,{className:"overview__toolbar-custom",alignment:{default:"alignLeft"}},t),r().createElement(s.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},h(!1)))),n?r().createElement(g,{columns:e,totalRows:l,hasActionColumn:!0}):r().createElement(d,{ariaLabel:m,columns:e,cssClasses:"overview__table",rows:a,renderActions:E},u),h(!0))};var h=n(77946),v=n(95639);const b=({instance:e,onClosingDetails:t})=>{const{t:n}=(0,i.useTranslation)(["openbridgeTempDictionary"]),a=e=>(0,v.Z)(new Date(e),"PPPP p");return r().createElement(s.DrawerPanelContent,{widths:{default:"width_33"},"data-ouia-component-id":"instance-details-panel"},r().createElement(s.DrawerHead,null,r().createElement(s.Stack,null,r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-details-name-label",component:"small"},n("common.name")))),r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-details-name",component:"h2"},e.name)))),r().createElement(s.DrawerActions,null,r().createElement(s.DrawerCloseButton,{onClick:t,"data-ouia-component-id":"close-instance-details"}))),r().createElement(s.DrawerPanelBody,null,r().createElement(s.DescriptionList,{isHorizontal:!0,isCompact:!0},r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,n("common.id")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-id"},e.id)),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,n("common.owner")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-owner"},e.owner)),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,n("common.submittedAt")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-submitted-date"},e.submitted_at&&a(e.submitted_at))),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,n("common.publishedAt")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-published-date"},e.published_at&&a(e.published_at))))),r().createElement(s.DrawerPanelBody,null,r().createElement(s.DescriptionList,{isCompact:!0},r().createElement(s.DescriptionListGroup,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h3},n("common.ingressEndpoint"))),r().createElement(s.DescriptionListDescription,null,r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Text,{component:s.TextVariants.small},n("common.ingressEndpointDescription"))),r().createElement(s.StackItem,null,r().createElement(s.ClipboardCopy,{"data-ouia-component-id":"instance-details-endpoint",isBlock:!0,isReadOnly:!0,hoverTip:n("common.copy"),clickTip:n("common.copied"),variant:s.ClipboardCopyVariant.inlineCompact},e.endpoint))))))))},f=e=>{const{status:t}=e;return r().createElement(s.Label,{color:"ready"===t?"green":"grey",icon:"ready"===t?r().createElement(c.CheckCircleIcon,null):null,style:{textTransform:"capitalize"},variant:"outline","data-ouia-component-id":t,"data-ouia-component-type":"QE/ProcessorState"},t)};var S=n(31527),T=n(20807);function y(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!0),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{getBridge:(0,a.useCallback)((e=>{new S.Re(new S.VK({accessToken:i,basePath:l})).getBridge(e).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))}),[i,l]),isLoading:o,bridge:e,error:n}}const C=e=>{const{pageTitle:t,hasEditButton:n=!1,hasActionDropdown:a,hasLabel:o,totalTabs:i=0}=e;return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:0===i,type:"breadcrumb"},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"140px"})),r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"140px"})))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:0===i},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"20%",screenreaderText:t})),o&&r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"md",width:"80px"})))),n&&r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"60px"})),a&&r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"100px"})))),i>0&&r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"tabs"},r().createElement(s.Tabs,{usePageInsets:!0},[...Array(i).keys()].map((e=>r().createElement(s.Tab,{key:e,eventKey:e,title:r().createElement(s.Skeleton,{fontSize:"xl",width:"100px"})}))))))},I=e=>r().createElement(s.Card,{ouiaId:"loading-table"},r().createElement(s.Toolbar,null,r().createElement(s.ToolbarContent,null,r().createElement(s.ToolbarItem,{alignment:{default:"alignLeft"}},e.customToolbarElement),r().createElement(s.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(s.Skeleton,{width:"190px"})))),r().createElement(g,Object.assign({},e)),r().createElement("div",{className:"pf-c-pagination pf-m-bottom"},r().createElement(s.Skeleton,{width:"320px"})));var L=n(9669),w=n.n(L);function D(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!0),i=(0,a.useRef)(),{getToken:l,apiBaseUrl:c}=(0,T.D)();return{getProcessors:(0,a.useCallback)(((e,n,a,o,m)=>{var u;s(!m),null===(u=i.current)||void 0===u||u.cancel();const d=w().CancelToken.source();i.current=d;new S.dU(new S.VK({accessToken:l,basePath:c})).listProcessors(e,void 0,n,a,new Set,null!=o?o:void 0,{cancelToken:d.token}).then((e=>{t(e.data),s(!1)})).catch((e=>{w().isCancel(e)||(r(e),s(!1))}))}),[l,c]),isLoading:o,processorListResponse:e,error:n}}function k(e,t){const n=(0,a.useRef)(e);(0,a.useEffect)((()=>{n.current=e}),[e]),(0,a.useEffect)((()=>{if(t<=0)return;const e=setInterval((()=>n.current()),t);return()=>clearInterval(e)}),[t])}const P=e=>{const{ouiaId:t,modalTitle:n,resourceName:o,resourceType:l,onCancel:c,onConfirm:m,showDialog:u,isPreloading:d,isLoading:p,blockedDeletionReason:g}=e,{t:E}=(0,i.useTranslation)("openbridgeTempDictionary"),[h,v]=(0,a.useState)(""),b=h===o,f=()=>{v(""),c()};(0,a.useEffect)((()=>{v("")}),[o]);const S=[r().createElement(s.Button,{ouiaId:"confirm",key:"confirm",variant:"danger",isDisabled:!b||p,isLoading:p,onClick:()=>{m()}},E("common.delete")),r().createElement(s.Button,{ouiaId:"cancel",key:"cancel",variant:"link",onClick:f,isDisabled:p},E("common.cancel"))],T=[r().createElement(s.Button,{ouiaId:"close",key:"close",onClick:f},E("common.close"))];return r().createElement(s.Modal,{ouiaId:t,variant:s.ModalVariant.small,title:n,titleIconVariant:g?"danger":"warning",isOpen:u,onClose:c,actions:g?T:S},r().createElement(s.ModalBoxBody,null,d&&r().createElement(s.Bullseye,{className:"delete-modal-body__bullseye"},r().createElement(s.Spinner,{isSVG:!0,size:"lg","aria-label":E("common.loading")})),!d&&g&&r().createElement(s.Bullseye,{className:"delete-modal-body__bullseye"},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p},r().createElement(i.Trans,null,g)))),!d&&!g&&r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p},r().createElement(i.Trans,{i18nKey:"openbridgeTempDictionary:common.resourceWillBeDeletedHTML",values:{type:null==l?void 0:l.toLowerCase(),name:o}})))),r().createElement(s.StackItem,null,r().createElement(s.Form,{onSubmit:e=>e.preventDefault()},r().createElement(s.FormGroup,{fieldId:"delete-confirmation-value"},r().createElement(s.Text,{component:s.TextVariants.p},r().createElement(i.Trans,{i18nKey:"openbridgeTempDictionary:common.typeNameToConfirmHTML",values:{name:o}})),r().createElement(s.TextInput,{id:"delete-confirmation-value",ouiaId:"delete-confirmation-value","data-testid":"delete-confirmation-value",value:h,type:"text",onChange:v,isDisabled:p,"aria-label":"delete-confirmation-value",autoComplete:"off",validated:b?s.ValidatedOptions.success:s.ValidatedOptions.default})))))))};const x=e=>{var t;const n=null===(t=e.response)||void 0===t?void 0:t.data;return void 0!==(null==n?void 0:n.items)},j=e=>{var t,n;const a=null===(t=e.response)||void 0===t?void 0:t.data;return(null===(n=null==a?void 0:a.items)||void 0===n?void 0:n.length)?null==a?void 0:a.items[0]:void 0},N=e=>{var t;return null===(t=j(e))||void 0===t?void 0:t.code},M=e=>{var t;return null===(t=j(e))||void 0===t?void 0:t.reason},O="OPENBRIDGE-1",_="OPENBRIDGE-2",A="OPENBRIDGE-4",B="OPENBRIDGE-19",R="OPENBRIDGE-22",F="OPENBRIDGE-33",G="OPENBRIDGE-34",U=e=>{const{t}=(0,i.useTranslation)(["openbridgeTempDictionary"]),n=(0,o.useHistory)(),{showDeleteModal:s,instanceId:l,instanceName:c,onDeleted:m,onCanceled:u}=e,[d,p]=(0,a.useState)(!1),[g,E]=(0,a.useState)(),h=(0,a.useRef)(!1),{getProcessors:v,processorListResponse:b,error:f}=D();(0,a.useEffect)((()=>{s&&l&&c&&(p(!0),v(l))}),[s,l,c,v]),(0,a.useEffect)((()=>{b&&(p(!1),b.total&&b.total>0&&E(t("instance.errors.cantDeleteBecauseProcessorsInside",{resource:c})))}),[b,t]),(0,a.useEffect)((()=>{f&&w().isAxiosError(f)&&(p(!1),E(t("instance.errors.cantDeleteTryLater")))}),[f,t]);const{deleteBridge:y,isLoading:C,success:I,error:L}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(!1),[o,s]=(0,a.useState)(),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{deleteBridge:e=>{s(void 0),t(void 0),r(!0),new S.Re(new S.VK({accessToken:i,basePath:l})).deleteBridge(e).then((()=>s(!0))).catch((e=>{t(e),s(!1)})).finally((()=>r(!1)))},isLoading:n,success:o,error:e}}();return(0,a.useEffect)((()=>{var e;if(I&&m(),L&&w().isAxiosError(L)){const n=t("instance.errors.cantDeleteTryLater");x(L)&&N(L)===_?(E(null!==(e=M(L))&&void 0!==e?e:n),h.current=!0):x(L)&&N(L)===A?(E(t("instance.errors.cantDeleteBecauseNotExisting")),h.current=!0):E(n)}}),[I,L,m,t]),r().createElement(r().Fragment,null,l&&c&&r().createElement(P,{ouiaId:"delete-instance",modalTitle:t(g?"instance.errors.cantDelete":"instance.deleteIt"),showDialog:s,resourceType:"Instance",resourceName:c,isPreloading:d,blockedDeletionReason:g,isLoading:C,onCancel:()=>{g&&h.current&&n.replace("/"),h.current=!1,E(void 0),u()},onConfirm:()=>{l&&y(l)}}))},V=e=>e===S.gj.Ready||e===S.gj.Failed;const z=e=>{const{t}=(0,i.useTranslation)(["openbridgeTempDictionary"]),{showDeleteModal:n,bridgeId:o,processorId:s,processorName:l,onDeleted:c,onCanceled:m}=e,[u,d]=(0,a.useState)(),{deleteProcessor:p,isLoading:g,error:E,success:h}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(!1),[o,s]=(0,a.useState)(),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{deleteProcessor:(e,n)=>{s(void 0),t(void 0),r(!0),new S.dU(new S.VK({accessToken:i,basePath:l})).deleteProcessor(e,n).then((()=>s(!0))).catch((e=>{t(e),s(!1)})).finally((()=>r(!1)))},isLoading:n,success:o,error:e}}();return(0,a.useEffect)((()=>{h&&c()}),[h,c]),(0,a.useEffect)((()=>{var e;if(E&&w().isAxiosError(E)){const n=t("processor.errors.cantDeleteTryLater");x(E)&&N(E)===B?d(null!==(e=M(E))&&void 0!==e?e:n):x(E)&&N(E)===A?d(t("processor.errors.cantDeleteBecauseNotExisting")):d(n)}}),[E,t]),r().createElement(r().Fragment,null,s&&l&&r().createElement(P,{ouiaId:"delete-processor",modalTitle:t("processor.deleteProcessor"),showDialog:n,isPreloading:!1,blockedDeletionReason:u,resourceType:t("common.processor"),resourceName:l,isLoading:g,onCancel:()=>{d(void 0),m()},onConfirm:()=>{o&&s&&p(o,s)}}))};class $ extends Error{constructor(e,t){super(t),this.detailSection=e}}const H=()=>{var e;const{instanceId:t}=(0,o.useParams)(),{t:n}=(0,i.useTranslation)(["openbridgeTempDictionary"]),m=(0,o.useLocation)(),u=(0,o.useHistory)(),d=r().createRef(),[p,g]=(0,a.useState)(0),[v,S]=(0,a.useState)(10),[T,L]=(0,a.useState)(),[P,j]=(0,a.useState)(0),[M,O]=(0,a.useState)(!1),[_,B]=(0,a.useState)(!1),{getBridge:R,bridge:F,isLoading:G,error:H}=y();(0,a.useEffect)((()=>{R(t)}),[R,t]);const{getProcessors:Q,processorListResponse:Z,isLoading:K,error:W}=D(),Y=(0,a.useCallback)((()=>Q(t,p,v,void 0,!0)),[p,v,Q,t]),X=(0,a.useCallback)((e=>{const t=e?e.name:n("instance.smartEventInstance");return r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-name",component:"h1"},t))}),[n]);k((()=>Y()),1e4),(0,a.useEffect)((()=>Q(t,0,10)),[Q,t]),(0,a.useEffect)((()=>{var e,t;Z&&(g(null!==(e=Z.page)&&void 0!==e?e:0),L(null!==(t=Z.total)&&void 0!==t?t:0))}),[Z]),(0,a.useEffect)((()=>{if(H&&w().isAxiosError(H)){if(!x(H)||N(H)!==A)throw new $(X(),n("instance.errors.instanceDetailsGenericError"));u.replace("/instance-not-found",{title:n("instance.notFound"),message:n("instance.errors.cantFindInstance")})}if(W)throw new $(X(F),n("instance.errors.processorsListGenericError"))}),[F,H,X,u,W,n]);const J=[{accessor:"name",label:n("common.name"),formatter:(e,t)=>{var n,a;const s=null!==(a=null===(n=t)||void 0===n?void 0:n.id)&&void 0!==a?a:"";return r().createElement(o.Link,{"data-testid":"tableProcessors-linkProcessor",to:`${m.pathname}/processor/${s}`},e)}},{accessor:"id",label:n("common.id")},{accessor:"type",label:n("common.type"),formatter:e=>{const t=e;return t&&t.length?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}},{accessor:"status",label:n("common.status"),formatter:e=>{var t;const n=null!==(t=e)&&void 0!==t?t:"";return r().createElement(f,{status:n})}},{accessor:"submitted_at",label:n("common.submittedAt"),formatter:e=>{const t=new Date(e);return(0,h.Z)(t,new Date)+" "+n("common.ago")}}],q=r().createElement(o.Link,{to:`${m.pathname}/create-processor`},r().createElement(s.Button,{ouiaId:"create-processor",variant:"primary"},n("processor.createProcessor"))),ee=(0,a.useCallback)(((e,n)=>{const a=n===v?e:0;g(a),S(n),Q(t,a,n)}),[v,Q,t]),[te,ne]=(0,a.useState)(!1),[ae,re]=(0,a.useState)(""),[oe,se]=(0,a.useState)(""),ie=(0,a.useCallback)((()=>{ne(!1),u.push("/")}),[u]),[le,ce]=(0,a.useState)(!1),me=(0,a.useCallback)((()=>{ce(!1),Q(t,p,v)}),[Q,t,p,v]),ue=e=>[{title:n("common.delete"),onClick:()=>{const t=e.originalData.id,n=e.originalData.name;t&&n&&((e,t)=>{re(e),se(t),ce(!0)})(t,n)},isDisabled:!V(e.originalData.status)}];return r().createElement(r().Fragment,null,(G||void 0===T&&K)&&r().createElement(r().Fragment,null,r().createElement(C,{pageTitle:n("instance.loadingInstance"),hasActionDropdown:!0,hasLabel:!1,totalTabs:1}),r().createElement(s.PageSection,null,r().createElement(s.TabContent,{id:"instance-skeleton__page__tabs-processors"},r().createElement(I,{hasActionColumn:!0,columns:J,totalRows:v,customToolbarElement:q})))),F&&(null==Z?void 0:Z.items)&&r().createElement(r().Fragment,null,r().createElement(s.Drawer,{isExpanded:_},r().createElement(s.DrawerContent,{"data-ouia-component-id":"instance-drawer",panelContent:r().createElement(b,{onClosingDetails:()=>B(!1),instance:F})},r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"breadcrumb"},r().createElement(l,{path:[{label:n("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=F.name)&&void 0!==e?e:""}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Split,null,r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-name",component:"h1"},F.name))),r().createElement(s.SplitItem,null,r().createElement(s.Dropdown,{className:"instance-page__actions",ouiaId:"actions",onSelect:()=>O(!1),position:s.DropdownPosition.right,toggle:r().createElement(s.DropdownToggle,{ouiaId:"actions",onToggle:e=>O(e),toggleIndicator:c.CaretDownIcon},n("common.actions")),isOpen:M,dropdownItems:[r().createElement(s.DropdownGroup,{key:"details-group",label:n("instance.viewInformation")},r().createElement(s.DropdownItem,{key:"details",ouiaId:"details",onClick:()=>{B(!0)}},n("common.details"))),r().createElement(s.DropdownSeparator,{key:"separator"}),r().createElement(s.DropdownItem,{key:"delete",ouiaId:"delete",onClick:()=>{ne(!0)},isDisabled:!V(F.status)},n("instance.delete"))]})))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"tabs"},r().createElement(s.Tabs,{className:"instance-page__tabs",ouiaId:"instance-details",usePageInsets:!0,activeKey:P,onSelect:(e,t)=>{j(t)}},r().createElement(s.Tab,{eventKey:0,ouiaId:"processors",tabContentId:"instance-page__tabs-processors",tabContentRef:d,title:r().createElement(s.TabTitleText,null,n("common.processors"))}))),r().createElement(s.PageSection,null,r().createElement(s.TabContent,{eventKey:0,id:"instance-page__tabs-processors",ouiaId:"processors",ref:d,"aria-label":"Processors tab"},r().createElement(E,{columns:J,customToolbarElement:q,rows:Z.items,tableLabel:n("openbridgeTempDictionary:processor.processorsListTable"),isLoading:K,onPaginationChange:ee,pageNumber:p,pageSize:v,totalRows:null!=T?T:0,renderActions:({row:e,ActionsColumn:t})=>r().createElement(t,{items:ue(e)})},r().createElement(s.EmptyState,{variant:"large"},r().createElement(s.EmptyStateIcon,{icon:c.PlusCircleIcon}),r().createElement(s.Title,{headingLevel:"h4",size:"lg"},n("processor.noProcessors")))))))),r().createElement(U,{instanceId:F.id,instanceName:F.name,showDeleteModal:te,onCanceled:()=>ne(!1),onDeleted:ie}),r().createElement(z,{bridgeId:t,processorId:ae,processorName:oe,showDeleteModal:le,onCanceled:()=>ce(!1),onDeleted:me})))},Q=e=>{const{cloudProviders:t,cloudRegions:n,onCloudProviderChange:o,isDisabled:l}=e,[c,m]=(0,a.useState)(),[u,d]=(0,a.useState)(),[p,g]=(0,a.useState)(!1),{t:E}=(0,i.useTranslation)("openbridgeTempDictionary");(0,a.useEffect)((()=>{if(t.length>0){const e=t.find((e=>e.enabled));e&&e.id&&(m(e.id),o(e.id,null!=u?u:""))}}),[t,u,o]),(0,a.useEffect)((()=>{if(c&&n&&n.length>0){const e=n.find((e=>e.enabled));e&&e.name&&(d(e.name),o(c,e.name))}}),[n,c,o]);const h=(0,a.useMemo)((()=>l||!n?[r().createElement(s.SelectOption,{key:"placeholder",isPlaceholder:!0,value:E("instance.selectRegion"),isDisabled:!0,isSelected:!0})]:n?n.map((e=>r().createElement(s.SelectOption,{isDisabled:!e.enabled,key:e.name,value:e.name},e.display_name))):[]),[n,l,E]);return r().createElement(r().Fragment,null,r().createElement(s.FormGroup,{label:E("instance.cloudProvider"),isRequired:!0,fieldId:"cloud-provider"},r().createElement(s.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},spacer:{default:"spacerNone"},spaceItems:{default:"spaceItemsXs"}},t.length>0&&r().createElement(r().Fragment,null,t.map((e=>{var t;return r().createElement(s.FlexItem,{grow:{default:"grow"},key:e.id},r().createElement(s.Tile,{className:"pf-u-w-100",title:null!==(t=e.display_name)&&void 0!==t?t:"",key:e.id,icon:K(e.id),isSelected:e.id===c,style:{height:"100%"},onClick:()=>{var t;(t=e.id)&&t!==c&&m(t)},isDisabled:l}))}))),0===t.length&&r().createElement(Z,null))),r().createElement(s.FormGroup,{label:E("instance.cloudRegion"),isRequired:!0,fieldId:"cloud-region"},r().createElement(s.Select,{id:"cloud-region",toggleId:"cloud-region",name:"cloud-region",variant:s.SelectVariant.single,onToggle:()=>{g((e=>!e))},onSelect:(e,t)=>{d(t),g(!1)},selections:u,isOpen:p,"aria-describedby":"cloud-region",menuAppendTo:"parent",isDisabled:l||!n},h)))},Z=()=>{const{t:e}=(0,i.useTranslation)("openbridgeTempDictionary");return r().createElement(s.FlexItem,{grow:{default:"grow"},key:"skeleton"},r().createElement("div",{className:"cloud-provider__skeleton"},r().createElement(s.Skeleton,{height:"100%",width:"100%",screenreaderText:e("instance.loadingCloudProviders")})))},K=e=>{let t;if("aws"===e)t=r().createElement(c.AwsIcon,{size:"lg",color:"black",className:"cloud-provider__icon"});else t=r().createElement(r().Fragment,null);return t},W=e=>{const{isLoading:t,isModalOpen:n,onClose:o,onCreate:l,createBridgeError:c,getCloudProviders:m,getCloudRegions:u}=e,[d,p]=(0,a.useState)(""),[g,E]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),[b,f]=(0,a.useState)([]),[S,T]=(0,a.useState)(),[y,C]=(0,a.useState)(null),[I,L]=(0,a.useState)(null),[w,D]=(0,a.useState)(!1),[k,P]=(0,a.useState)(null),[j,M]=(0,a.useState)(""),{t:_}=(0,i.useTranslation)("openbridgeTempDictionary"),A="create-instance-form",B=(0,a.useCallback)((()=>""===d.trim()?(C(_("common.required")),!1):k&&d.trim()===k?(C(_("instance.errors.invalidName")),!1):(C(null),L(null),!0)),[d,_,k]),R=(0,a.useCallback)((e=>{if(e.preventDefault(),B()){const e=d.trim();l(e,g,h),M(e)}}),[d,g,h,l,B]),U=(0,a.useCallback)((e=>{p(e),k&&B()}),[k,B]),V=(0,a.useCallback)(((e,t)=>{e!==g&&E(e),t!==h&&v(t)}),[g,h]),z=(0,a.useCallback)((()=>{m().then((e=>f(e))).catch((()=>L("Internal Server Error")))}),[m]),$=(0,a.useCallback)((e=>{u(e).then((e=>T(e))).catch((()=>L("Internal server error")))}),[u]);(0,a.useEffect)((()=>{k&&B()}),[k,B]),(0,a.useEffect)((()=>{n?(p(""),E(""),v(""),P(null),C(null),L(null),D(!1),z()):(f([]),T(void 0))}),[n,z]),(0,a.useEffect)((()=>{g&&$(g)}),[g,$]),(0,a.useEffect)((()=>{(b.length>0&&0===b.filter((e=>e.enabled)).length||S&&S.length>0&&0===S.filter((e=>e.enabled)).length)&&D(!0)}),[S,b]),(0,a.useEffect)((()=>{var e,t;if(c&&x(c)){switch(N(c)){case O:P(j);break;case F:case G:D(!0);break;default:L(null!==(t=null===(e=c.response)||void 0===e?void 0:e.statusText)&&void 0!==t?t:"Internal Server Error")}}}),[c,j,z]);const H=(0,a.useMemo)((()=>t||w),[w,t]);return r().createElement(s.Modal,{isOpen:n,title:_("instance.createASEInstance"),ouiaId:"create-instance",width:640,onClose:()=>{C(null),L(null),P(null),o()},actions:[r().createElement(s.Button,{key:"submit",ouiaId:"submit",variant:"primary",type:"submit",form:A,isDisabled:H,spinnerAriaValueText:_("common.submittingRequest"),isLoading:t},_("instance.createSEInstance")),r().createElement(s.Button,{key:"cancel",ouiaId:"cancel",variant:"link",onClick:o},_("common.cancel"))]},r().createElement(s.Form,{id:A,onSubmit:R},(y||I)&&r().createElement(s.FormAlert,null,r().createElement(s.Alert,{ouiaId:"error-instance-create-fail",variant:"danger",title:_(y?"common.addressFormErrors":"instance.errors.cantCreateInstance"),"aria-live":"polite",isInline:!0})),w&&r().createElement(s.FormAlert,null,r().createElement(s.Alert,{variant:"warning",title:_("instance.creationTemporaryUnavailable"),"aria-live":"polite",isInline:!0},r().createElement("p",null,_("instance.cloudRegionsUnavailable")))),r().createElement(s.FormGroup,{label:_("common.name"),isRequired:!0,fieldId:"instance-name",validated:y?"error":"default",helperTextInvalid:y},r().createElement(s.TextInput,{isRequired:!0,ouiaId:"new-name",type:"text",maxLength:255,id:"instance-name",name:"instance-name",value:d,onChange:U,onBlur:B,validated:y?"error":"default",isDisabled:H})),r().createElement(Q,{cloudProviders:b,cloudRegions:S,onCloudProviderChange:V,isDisabled:H}),r().createElement(s.AlertGroup,null,r().createElement(s.Alert,{variant:"info",ouiaId:"info-instance-available-soon",isInline:!0,isPlain:!0,title:_("instance.instanceWillBeAvailableShortly")}))))};const Y=()=>{const{t:e}=(0,i.useTranslation)(["openbridgeTempDictionary"]),[t,n]=(0,a.useState)(0),[l,m]=(0,a.useState)(10),[u,d]=(0,a.useState)(),[p,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(),C=(0,a.useMemo)((()=>r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instances-page-title",component:"h1"},e("openbridgeTempDictionary:instance.instancesListPageTitle")))),[e]),L=[{accessor:"name",label:e("common.name"),formatter:(e,t)=>{var n,a,s;const i=null!==(a=null===(n=t)||void 0===n?void 0:n.id)&&void 0!==a?a:"";return(null===(s=t)||void 0===s?void 0:s.status)===S.gj.Ready?r().createElement(o.Link,{"data-testid":"tableInstances-linkInstance",to:`/instance/${i}`},e):r().createElement(r().Fragment,null,e)}},{accessor:"status",label:e("common.status"),formatter:e=>{var t;const n=null!==(t=e)&&void 0!==t?t:"";return r().createElement(f,{status:n})}},{accessor:"submitted_at",label:e("common.submittedAt"),formatter:t=>{const n=new Date(t);return(0,h.Z)(n,new Date)+" "+e("common.ago")}}],{bridgeListResponse:D,isLoading:P,getBridges:x,error:j}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!0),i=(0,a.useRef)(),{getToken:l,apiBaseUrl:c}=(0,T.D)();return{getBridges:(0,a.useCallback)(((e,n,a=!1)=>{var o;s(!a),null===(o=i.current)||void 0===o||o.cancel();const m=w().CancelToken.source();i.current=m,new S.Re(new S.VK({accessToken:l,basePath:c})).getBridges(void 0,e,n,new Set,{cancelToken:m.token}).then((e=>{t(e.data),s(!1)})).catch((e=>{w().isCancel(e)||(r(e),s(!1))}))}),[l,c]),isLoading:o,bridgeListResponse:e,error:n}}(),N=(0,a.useCallback)((()=>x(t,l,!0)),[t,l,x]);k((()=>N()),1e4),(0,a.useEffect)((()=>{x(0,10)}),[x]),(0,a.useEffect)((()=>{var e,t;D&&(n(null!==(e=D.page)&&void 0!==e?e:0),d(null!==(t=D.total)&&void 0!==t?t:0))}),[D]),(0,a.useEffect)((()=>{if(j)throw new $(C,e("instance.errors.instancesListGenericError"))}),[j,C,e]);const[M,O]=(0,a.useState)(!1),{error:_,isLoading:A,createBridge:B,bridge:R}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!1),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{createBridge:e=>{s(!0),t(void 0),r(void 0),new S.Re(new S.VK({accessToken:i,basePath:l})).createBridge(e).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,bridge:e,error:n}}(),F=(0,a.useCallback)(((e,t,n)=>{B({name:e,cloud_provider:t,region:n})}),[B]);(0,a.useEffect)((()=>{R&&(G(),x(t,l))}),[R,x,t,l]);const G=()=>{O(!1)},[z,H]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)(),[K,Y]=(0,a.useState)(),X=(0,a.useCallback)((()=>{Z(""),Y("")}),[]),J=(0,a.useCallback)((()=>{H(!1),x(t,l),X()}),[t,l,x,X]),q=(0,a.useCallback)((()=>{H(!1),X()}),[X]),{getCloudProviders:ee}=function(){const{getToken:e,apiBaseUrl:t}=(0,T.D)();return{getCloudProviders:(0,a.useCallback)((()=>new S.LL(new S.VK({accessToken:e,basePath:t})).listCloudProviders().then((e=>{var t;return null!==(t=e.data.items)&&void 0!==t?t:[]}))),[e,t])}}(),{getCloudProviderRegions:te}=function(){const{getToken:e,apiBaseUrl:t}=(0,T.D)();return{getCloudProviderRegions:(0,a.useCallback)((n=>new S.LL(new S.VK({accessToken:e,basePath:t})).listCloudProviderRegions(n).then((e=>e.data.items))),[e,t])}}(),ne=t=>[{title:e("common.details"),onClick:()=>{y(t.originalData),g(!0)}},{title:e("instance.delete"),onClick:()=>{const e=t.originalData.id,n=t.originalData.name;e&&n&&((e,t)=>{Z(e),Y(t),H(!0)})(e,n)},isDisabled:!V(t.originalData.status)}],ae=r().createElement(r().Fragment,null,r().createElement(s.Button,{ouiaId:"create-smart-event-instance",onClick:()=>O(!0)},e("instance.createSEInstance")),r().createElement(W,{isLoading:A,isModalOpen:M,onClose:G,onCreate:F,createBridgeError:_,getCloudProviders:ee,getCloudRegions:te})),re=(0,a.useCallback)(((e,t)=>{const a=t===l?e:0;n(a),m(t),x(a,t)}),[l,x]),oe=r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},C),r().createElement(s.PageSection,null,void 0===u&&P&&r().createElement(I,{columns:L,customToolbarElement:ae,totalRows:l,hasActionColumn:!0}),(null==D?void 0:D.items)&&r().createElement(E,{columns:L,customToolbarElement:ae,isLoading:P,rows:D.items,totalRows:null!=u?u:0,pageNumber:t,pageSize:l,onPaginationChange:re,tableLabel:e("openbridgeTempDictionary:instance.instancesListTable"),renderActions:({row:e,ActionsColumn:t})=>r().createElement(t,{items:ne(e)})},r().createElement(s.EmptyState,{variant:"large"},r().createElement(s.EmptyStateIcon,{icon:c.PlusCircleIcon}),r().createElement(s.Title,{headingLevel:"h4",size:"lg"},e("instance.noInstances")),r().createElement(s.EmptyStateBody,null,e("common.quickStartAccess"))))));return r().createElement(r().Fragment,null,r().createElement(s.Drawer,{isExpanded:p},r().createElement(s.DrawerContent,{"data-ouia-component-id":"instance-drawer",panelContent:v?r().createElement(b,{onClosingDetails:()=>g(!1),instance:v}):null},oe)),r().createElement(U,{showDeleteModal:z,instanceId:Q,instanceName:K,onDeleted:J,onCanceled:q}))};var X=n(49325);const J=e=>[X.v.STRING_IN,X.v.NUMBER_IN].includes(e.type),q=e=>e.values&&J(e)?e.values.join(","):e.value,ee=e=>{const{filters:t,onChange:n}=e,a=(e,a)=>{n(t.map(((t,n)=>n===a?e:t)))},{t:o}=(0,i.useTranslation)(["openbridgeTempDictionary"]),l=[{value:"",label:o("common.selectType"),isPlaceholder:!0},{value:X.v.STRING_EQUALS,label:o("processor.StringEquals"),isPlaceholder:!1},{value:X.v.STRING_CONTAINS,label:o("processor.StringContains"),isPlaceholder:!1},{value:X.v.STRING_BEGINS,label:o("processor.StringBeginsWith"),isPlaceholder:!1},{value:X.v.STRING_IN,label:o("processor.StringIn"),isPlaceholder:!1},{value:X.v.NUMBER_IN,label:o("processor.NumberIn"),isPlaceholder:!1}],m=e=>J(e)?r().createElement(s.Popover,{headerContent:o("processor.multipleValues"),bodyContent:o("processor.commaSeparatedValuesTooltip")},r().createElement("button",{type:"button","aria-label":o("processor.moreInfoForFilterValues"),onClick:e=>e.preventDefault(),"aria-describedby":"form-group-label-info",className:"pf-c-form__group-label-help"},r().createElement(c.HelpIcon,{noVerticalAlign:!0}))):void 0,u=e=>e.type===X.v.STRING_IN?"hello,world,how,are,you":e.type===X.v.NUMBER_IN?"1,-2,3":void 0;return r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Stack,{hasGutter:!0},t.map(((e,i)=>r().createElement(s.StackItem,{key:`filter-${e.type}-${i}`,"data-ouia-component-id":`item-${i}`,"data-testid":"filter-item"},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-key-${i}`,label:o("common.key")},r().createElement(s.TextInput,{type:"text",id:`filter-key-${i}`,ouiaId:"filter-key",name:`filter-key-${i}`,"aria-describedby":`filter-key-${i}`,value:e.key,onChange:t=>a(Object.assign(Object.assign({},e),{key:t}),i)}))),r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-type-${i}`,label:o("common.type")},r().createElement(s.FormSelect,{id:`filter-type-${i}`,ouiaId:"filter-type","aria-label":o("common.type"),value:e.type,onChange:t=>a(Object.assign(Object.assign({},e),{type:t}),i)},l.map(((e,t)=>r().createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label,isPlaceholder:e.isPlaceholder})))))),r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-value-${i}`,label:o("common.value"),labelIcon:m(e)},r().createElement(s.TextInput,{type:"text",id:`filter-value-${i}`,ouiaId:"filter-value",name:`filter-value-${i}`,"aria-describedby":`filter-value-${i}`,defaultValue:q(e),placeholder:u(e),onChange:t=>a(Object.assign(Object.assign({},e),{value:t}),i)}))),r().createElement(s.SplitItem,null,r().createElement(s.Flex,{direction:{default:"column"},justifyContent:{default:"justifyContentFlexEnd"},style:{height:"100%"}},r().createElement(s.FlexItem,null,r().createElement(s.Button,{variant:"plain",ouiaId:"delete-item","aria-label":o("processor.deleteFilter"),onClick:()=>(e=>{n(t.filter(((t,n)=>n!==e)))})(i),isDisabled:1===t.length},r().createElement(c.TrashAltIcon,null))))))))))),r().createElement(s.StackItem,null,r().createElement(s.Button,{variant:"link",ouiaId:"add-filter",icon:r().createElement(c.PlusCircleIcon,null),onClick:()=>{n([...t,{key:"",type:"",value:""}])},isInline:!0},o("processor.addFilter"))))};var te=n(49399),ne=n(96486);var ae=n(32538),re=n.n(ae),oe=n(45842),se=n(39443),ie=n(6533),le=n.n(ie),ce=n(18322),me=n.n(ce);const ue=new(le())({allErrors:!0,useDefaults:!0,strict:"log",strictSchema:!1});me()(ue);var de=n(70655),pe=n(39494),ge=n.n(pe);const Ee=(e,t)=>void 0!==t?r().createElement(s.Popover,{bodyContent:t},r().createElement("button",{type:"button","aria-label":`More info for ${e}`,onClick:e=>e.preventDefault(),"aria-describedby":"form-group-label-info",className:"pf-c-form__group-label-help"},r().createElement(c.HelpIcon,{noVerticalAlign:!0}))):void 0;class he extends(ge()){constructor(e,t,n,a,r){super(e,t),this.t=n,this.showCredentialHelpText=a,this.duplicateMode=r}getProps(e){const t=super.getProps(e),{description:n,example:a,label:r}=t,o=(0,de.__rest)(t,["description","example","label"]),{isSecret:s}=this.getField(e);return s?Object.assign(Object.assign(Object.assign({},o),this.showCredentialHelpText&&{helperText:this.duplicateMode?this.t("credentialDuplicateFieldHelpText"):this.t("credentialEditFieldHelpText")}),{labelIcon:Ee(r||e,n),name:e,label:r,type:"password"}):Object.assign(Object.assign({},o),{helperText:(i=a,void 0!==i?`Example: ${i}`:void 0),labelIcon:Ee(r||e,n),name:e,label:r});var i}getField(e){const t=super.getField(e),{enum:n,oneOf:a}=t,r=(0,de.__rest)(t,["enum","oneOf"]);let o;if(void 0!==r.type&&"string"===r.type&&void 0!==n&&(o=void 0===r.default&&""!==n[0]?["",...n]:n),void 0!==a){const[t]=a;return Object.assign(Object.assign({},t),{name:e,required:r.required,type:t.format,isSecret:"password"===t.format})}return Object.assign(Object.assign({name:e},r),void 0!==typeof o&&{enum:o})}}const ve=e=>{const{configuration:t={},onChange:n,registerValidation:o,schema:s,readOnly:l=!1}=e,{t:c}=(0,i.useTranslation)(["openbridgeTempDictionary"]),m=function(e){const t=ue.compile(e);return e=>{var n;return t(e),(null===(n=t.errors)||void 0===n?void 0:n.length)?{details:t.errors}:null}}(s),u=new he(s,m,c,!1,!1),d=re()(u.schema.properties,["error_handler","processors","steps"]),p=(0,a.useRef)();return o((()=>{var e;null===(e=p.current)||void 0===e||e.submit();return null===m(t)})),r().createElement(be,{validate:"onChangeAfterSubmit",schema:u,model:t,onChangeModel:n,ref:e=>p.current=e,disabled:l},Object.keys(d).map((e=>r().createElement(oe.Pt,{key:e,name:e,disabled:l}))))};const be=function e(t){class n extends(se.AutoForm.Auto(t)){onChange(e,t){if(""===t)return super.onChange(e,void 0);super.onChange(e,t)}render(){const e=this.getContext();return r().createElement(se.context.Provider,{value:e},r().createElement("section",Object.assign({className:"pf-c-form__section","data-ouia-component-id":"configuration",style:{marginTop:0}},this.getNativeFormProps())))}}return n.Auto=e,n}(se.ValidatedQuickForm),fe=({action:e,message:t,ouiaId:n,showDialog:a,title:o})=>{const{t:l}=(0,i.useTranslation)("openbridgeTempDictionary");return r().createElement(s.Modal,{ouiaId:n,variant:s.ModalVariant.small,title:o,titleIconVariant:"warning",isOpen:a,onClose:e,actions:[r().createElement(s.Button,{ouiaId:"close",key:"close",onClick:e},l("common.close"))]},r().createElement(s.ModalBoxBody,null,r().createElement(s.Bullseye,{height:100},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p},t)))))},Se=e=>{var t,n,l,c,m,u;const{configType:d,onChange:p,registerValidation:g,readOnly:E=!1,schemaCatalog:h,getSchema:v}=e,b=(0,o.useHistory)(),{instanceId:f}=(0,o.useParams)(),[S,T]=(0,a.useState)(null!==(l=d===X.j.ACTION?null===(t=e.action)||void 0===t?void 0:t.type:null===(n=e.source)||void 0===n?void 0:n.type)&&void 0!==l?l:""),[y,C]=(0,a.useState)(),[I,L]=(0,a.useState)(!1),[D,k]=(0,a.useState)(null!==(u=d===X.j.ACTION?null===(c=e.action)||void 0===c?void 0:c.parameters:null===(m=e.source)||void 0===m?void 0:m.parameters)&&void 0!==u?u:{}),[P,j]=(0,a.useState)(!1),M=(0,a.useRef)(""),O=(0,a.useRef)((()=>j(!1))),{t:_}=(0,i.useTranslation)(["openbridgeTempDictionary"]),[B,R]=(0,a.useState)(),F=(0,a.useCallback)((e=>{T(e);p({type:e,parameters:{}}),e&&R(!0)}),[p]),G=(0,a.useRef)();(0,a.useEffect)((()=>{e.configType===X.j.ACTION&&e.action&&(T(e.action.type),k(e.action.parameters)),e.configType===X.j.SOURCE&&e.source&&(T(e.source.type),k(e.source.parameters))}),[e]),(0,a.useEffect)((()=>{S&&(L(!0),C(void 0),v(S,d).then((e=>C(e))).catch((e=>{e&&w().isAxiosError(e)&&(x(e)&&N(e)===A?(j(!0),O.current=()=>{j(!1),F("")},M.current=_("processor.errors.cantCreateProcessorOfThatType")):(j(!0),O.current=()=>{j(!1),b.replace(`/instance/${f}`)},M.current=_("common.tryAgainLater")))})).finally((()=>L(!1))))}),[d,v,b,f,_,S,F]);const U=[{name:"",label:_(d===X.j.ACTION?"processor.selectAction":"processor.selectSource"),isPlaceholder:!0},...Te(h,d)];return g((()=>{var e,t;const n=""!==S;return R(n),null!==(t=null===(e=G.current)||void 0===e?void 0:e.call(G))&&void 0!==t&&t&&n})),r().createElement(r().Fragment,null,r().createElement(s.FormGroup,{fieldId:`${d}-type`,label:_(`processor.${d}Type`),isRequired:!0,helperTextInvalid:_("common.required"),validated:!1===B?"error":"default",className:!1===B?"processor-field-error":""},r().createElement(s.FormSelect,{id:`${d}-type`,ouiaId:`${d}-type`,"aria-label":_(`processor.${d}Type`),isRequired:!0,value:S,onChange:e=>F(e),validated:!1===B?"error":"default",isDisabled:E},U.map(((e,t)=>r().createElement(s.FormSelectOption,{key:t,value:e.name,label:e.label,isPlaceholder:e.isPlaceholder}))))),(""===S||I)&&r().createElement(s.FormGroup,{fieldId:`${d}-config`,label:_(`processor.${d}Configuration`)},r().createElement(s.TextInput,{type:"text",id:`${d}-config`,ouiaId:`missing-${d}s`,name:`${d}-config`,"aria-describedby":`${d}-config`,isDisabled:!0})),""!==S&&y&&!I&&r().createElement(ve,{configuration:D,schema:y,onChange:e=>{k(e),p({type:S,parameters:e})},registerValidation:e=>{G.current=e},readOnly:E}),r().createElement(fe,{action:O.current,message:M.current,showDialog:P,title:_("processor.errors.cantCreateProcessor")}))},Te=(e,t)=>e.filter((e=>(null==e?void 0:e.type)===t)).map((e=>{var t,n;return{name:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",label:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"",isPlaceholder:!1}})),ye=e=>{var t,n,o,l,c;const{existingProcessorName:m,malformedTransformationTemplate:d,isLoading:p,saveButtonLabel:g,onSave:E,onCancel:h,processor:v,schemaCatalog:b,getSchema:f}=e,{t:T}=(0,i.useTranslation)(["openbridgeTempDictionary"]),y=(0,a.useMemo)((()=>void 0!==v),[v]),[C,I]=(0,a.useState)(null==v?void 0:v.type),[L,w]=(0,a.useState)(null!==(t=null==v?void 0:v.name)&&void 0!==t?t:""),[D,k]=(0,a.useState)(null!==(n=null==v?void 0:v.filters)&&void 0!==n?n:[{key:"",type:"",value:""}]),[P,x]=(0,a.useState)(null!==(o=null==v?void 0:v.transformationTemplate)&&void 0!==o?o:""),[j,N]=(0,a.useState)(null!==(l=null==v?void 0:v.action)&&void 0!==l?l:{type:"",parameters:{}}),[M,O]=(0,a.useState)(null!==(c=null==v?void 0:v.source)&&void 0!==c?c:{type:"",parameters:{}}),[_,A]=(0,a.useState)({name:L,type:C,filters:D,transformationTemplate:P,action:j,source:M}),[B,R]=(0,a.useState)(!1),{registerValidateConfig:F,validateName:G,validation:U,validate:V,resetValidation:z}=function(e,t){const[n,r]=(0,a.useState)({isValid:void 0,errors:{}}),{name:o,type:s}=e,{t:l}=(0,i.useTranslation)(["openbridgeTempDictionary"]),c=(0,a.useRef)(),m=(0,a.useCallback)((e=>{r((t=>Object.assign(Object.assign({},t),{errors:(0,ne.omit)(t.errors,e)})))}),[]),u=(0,a.useCallback)((()=>0===o.trim().length?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{name:l("common.required")})}))),!1):t&&o.trim()===t?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{name:l("processor.errors.invalidName")})}))),!1):(m("name"),!0)),[o,m,t,l]),d=(0,a.useCallback)((()=>s?(m("processorType"),!0):(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{processorType:l("processor.errors.missingProcessorType")})}))),!1)),[s,m,l]);return{validate:(0,a.useCallback)((()=>{const e=[u,d,c.current].reduce(((e,t)=>{var n;return(null!==(n=null==t?void 0:t())&&void 0!==n?n:e)&&e}),!0);return r((t=>Object.assign(Object.assign({},t),{isValid:e}))),e}),[u,d,c]),validation:n,validateName:u,validateProcessorType:d,registerValidateConfig:e=>{c.current=e},resetValidation:m}}(_,m);(0,a.useEffect)((()=>{A({name:L,type:C,filters:D,transformationTemplate:P,action:j,source:M})}),[L,C,D,P,j,M]);const $=e=>{const t={name:e.name};if(e.type===S.XN.Sink?t.action=e.action:t.source=e.source,e.filters&&e.filters.length>0){const n=(e=>e.filter((e=>e.type&&(e.value||e.values)&&e.key)).map((e=>{if(e.value&&J(e)){const t=t=>e.type===X.v.NUMBER_IN?parseFloat(t.trim()):t.trim(),n=e.type===X.v.NUMBER_IN?e=>null!==e&&!isNaN(e):String,a=e.value.split(",").map(t).filter(n);return{key:e.key,type:e.type,values:a}}return e})).filter((e=>e.value||e.values&&e.values.length>0)))(e.filters);n.length>0&&(t.filters=n)}return e.transformationTemplate&&e.transformationTemplate.trim().length>0&&(t.transformationTemplate=e.transformationTemplate.trim()),t};return(0,a.useEffect)((()=>{m&&(R(!0),V())}),[m,V]),(0,a.useEffect)((()=>{var e;(B||d)&&(null===(e=document.querySelector(".processor-field-error, .pf-m-error"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),R(!1))}),[B,d]),r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"},className:"processor-edit__page-section"},r().createElement("section",{className:"processor-edit__container"},r().createElement(s.Flex,{direction:{default:"column"},style:{height:"100%"}},r().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"},flexWrap:{default:"nowrap"},className:"processor-edit__outer-wrap"},r().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"},className:"processor-edit__inner-wrap"},r().createElement(s.FlexItem,{grow:{default:"grow"},className:"processor-edit__content-wrap"},r().createElement(s.Form,{className:"processor-edit__form"},r().createElement(s.FormSection,{title:T("processor.generalInformation"),titleElement:"h2"},y?r().createElement(s.Stack,null,r().createElement(s.StackItem,null,r().createElement(s.FormGroup,{label:T("processor.processorType"),fieldId:"processor-type"})),r().createElement(s.StackItem,null,r().createElement(s.Label,{color:"blue","data-testid":"processor-type-label"},(null==v?void 0:v.type)&&T(`processor.${v.type}`)))):r().createElement(s.FormGroup,{label:T("processor.selectProcessorType"),fieldId:"processor-type",isRequired:!0,helperTextInvalid:U.errors.processorType,validated:U.errors.processorType?"error":"default",className:U.errors.processorType&&"processor-field-error"},r().createElement(s.Grid,{hasGutter:!0,className:"processor-form__type-selection"},r().createElement(s.GridItem,{span:6},r().createElement(s.Tile,{title:T("processor.sourceProcessor"),"data-ouia-component-id":"source","data-ouia-component-type":"Tile",isSelected:C===S.XN.Source,style:{height:"100%"},onClick:()=>{I(S.XN.Source),z("processorType")}},T("processor.sourceProcessorDescription"))),r().createElement(s.GridItem,{span:6},r().createElement(s.Tile,{title:T("processor.sinkProcessor"),"data-ouia-component-id":"sink","data-ouia-component-type":"Tile",style:{width:"100%",height:"100%"},isSelected:C===S.XN.Sink,onClick:()=>{I(S.XN.Sink),z("processorType")}},T("processor.sinkProcessorDescription"))))),r().createElement(s.FormGroup,{fieldId:"processor-name",label:T("processor.processorName"),isRequired:!0,helperTextInvalid:U.errors.name,validated:U.errors.name?"error":"default",className:U.errors.name&&"processor-field-error"},r().createElement(s.TextInput,{type:"text",id:"processor-name",ouiaId:"processor-name",name:"processor-name","aria-describedby":"processor-name",isRequired:!0,maxLength:255,value:L,onChange:w,validated:U.errors.name?"error":"default",onBlur:()=>{G()}}))),C&&r().createElement(r().Fragment,null,C===S.XN.Source&&r().createElement(s.FormSection,{title:T("processor.source")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"source-type-description"},T("processor.selectSourceProcessorTypeDescription"))),r().createElement(Se,{configType:X.j.SOURCE,source:M,registerValidation:F,onChange:O,readOnly:y,schemaCatalog:b,getSchema:f})),r().createElement(s.FormSection,{title:T("processor.filters"),titleElement:"h2"},r().createElement(ee,{filters:D,onChange:k})),C===S.XN.Sink&&r().createElement(r().Fragment,null,r().createElement(s.FormSection,{title:T("processor.transformation")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"transformation-description"},T("processor.addTransformationDescription"))),r().createElement(te.CodeEditor,{id:"transformation-template",className:(0,u.css)("processor-edit__transformation-template",d?"processor-field-error":""),height:"300px",isLineNumbersVisible:!0,code:P,onChange:x,options:{scrollbar:{alwaysConsumeMouseWheel:!1}}}),d&&r().createElement("p",{className:"processor-edit__transformation-template__helper-text pf-c-form__helper-text pf-m-error","aria-live":"polite"},d)),r().createElement(s.FormSection,{title:T("processor.action")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"action-description"},T("processor.selectActionDescription"))),r().createElement(Se,{configType:X.j.ACTION,action:j,registerValidation:F,onChange:N,readOnly:y,schemaCatalog:b,getSchema:f}))),C&&r().createElement(s.AlertGroup,{className:"processor-edit__form__notice"},r().createElement(s.Alert,{variant:"info",ouiaId:"info-processor-available-soon",isInline:!0,isPlain:!0,title:T("processor.processorWillBeAvailableShortly")})))))),r().createElement(s.Flex,{flexWrap:{default:"wrap"},shrink:{default:"shrink"}},r().createElement(s.ActionGroup,{className:"processor-edit__actions"},r().createElement(s.Button,{variant:"primary",ouiaId:"submit",onClick:()=>{if(R(!0),V()&&_){const e=$(_);E(e)}},isLoading:p,isDisabled:p},g),r().createElement(s.Button,{variant:"link",ouiaId:"cancel",onClick:h,isDisabled:p},T("common.cancel")))))))))};const Ce=()=>r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"},className:"processor-edit__page-section"},r().createElement("section",{className:"processor-edit__form"},r().createElement(s.Flex,{direction:{default:"column"},spaceItems:{default:"spaceItemsXl"}},r().createElement(s.FlexItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"30%"})),r().createElement(s.FlexItem,null,r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"20%"})),r().createElement(s.StackItem,null,r().createElement(s.Grid,{hasGutter:!0},r().createElement(s.GridItem,{span:6},r().createElement(s.Skeleton,{shape:"square",width:"100%",height:"110px"})),r().createElement(s.GridItem,{span:6},r().createElement(s.Skeleton,{shape:"square",width:"100%",height:"110px"})))))),r().createElement(s.FlexItem,null,r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"20%"})),r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"100%"})))))));function Ie(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!0),{getToken:i,apiBaseUrl:l}=(0,T.D)(),c=(0,a.useCallback)((()=>{new S.OS(new S.VK({accessToken:i,basePath:l})).getCatalog().then((e=>{var n;return t(null===(n=e.data)||void 0===n?void 0:n.items)})).catch((e=>r(e))).finally((()=>s(!1)))}),[i,l]);return(0,a.useEffect)((()=>c()),[c]),{schemas:e,isLoading:o,error:n}}function Le(){const{getToken:e,apiBaseUrl:t}=(0,T.D)(),[n,r]=(0,a.useState)();return{getSchema:(0,a.useCallback)(((n,a)=>{const o=new S.OS(new S.VK({accessToken:e,basePath:t}));return a===X.j.ACTION?o.getActionProcessorSchema(n).then((e=>e.data)).catch((e=>{throw r(e),e})):o.getSourceProcessorSchema(n).then((e=>e.data)).catch((e=>{throw r(e),e}))}),[e,t]),error:n}}const we=()=>{var e;const{instanceId:t}=(0,o.useParams)(),[n,c]=(0,a.useState)(),[m,u]=(0,a.useState)(),[d,p]=(0,a.useState)(),[g,E]=(0,a.useState)(!1),h=(0,a.useRef)(""),v=(0,a.useRef)((()=>E(!1))),b=(0,o.useHistory)(),f=(0,a.useCallback)((()=>b.push(`/instance/${t}`)),[t,b]),{t:I}=(0,i.useTranslation)(["openbridgeTempDictionary"]),{getBridge:L,bridge:D,isLoading:k,error:P}=y();(0,a.useEffect)((()=>{L(t)}),[L,t]),(0,a.useEffect)((()=>{if(P&&w().isAxiosError(P)){if(!x(P)||N(P)!==A)throw new $(r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},I("common.processor"))),I("processor.errors.instanceDetailsGenericError"));b.replace("/processor-instance-not-found",{title:I("instance.notFound"),message:I("processor.errors.cantFindInstance")})}}),[P,b,I]);const{addProcessorToBridge:j,isLoading:B,processor:F,error:G}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!1),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{addProcessorToBridge:(e,n)=>{t(void 0),r(void 0),s(!0),new S.dU(new S.VK({accessToken:i,basePath:l})).addProcessorToBridge(e,n).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,processor:e,error:n}}(),{schemas:U,isLoading:V,error:z}=Ie(),{getSchema:H}=Le();return(0,a.useEffect)((()=>{F&&f()}),[F,f]),(0,a.useEffect)((()=>{var e;G&&w().isAxiosError(G)&&(x(G)&&N(G)===O?c(null==d?void 0:d.name):x(G)&&N(G)===_||N(G)===A?(E(!0),v.current=()=>{E(!1),b.replace("/")},h.current=I("processor.errors.cantCreateProcessorBecauseInstanceNotAvailable")):x(G)&&N(G)===R?u(null!==(e=M(G))&&void 0!==e?e:I("processor.errors.malformedTransformation")):(E(!0),v.current=()=>{E(!1)},h.current=I("common.tryAgainLater")))}),[G,b,d,I]),(0,a.useEffect)((()=>{if(z&&w().isAxiosError(z))throw new $(r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},I("common.processor"))),I("processor.errors.processorDetailsGenericError"))}),[z,I]),r().createElement(r().Fragment,null,(k||V)&&r().createElement(r().Fragment,null,r().createElement(C,{pageTitle:I("instance.processor.loadingProcessor"),hasActionDropdown:!1,hasLabel:!1}),r().createElement(Ce,null)),D&&U&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{type:"breadcrumb"},r().createElement(l,{path:[{label:I("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=D.name)&&void 0!==e?e:"",linkTo:`/instance/${t}`},{label:I("processor.createProcessor")}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1",ouiaId:"page-name"},I("processor.createProcessor")))),r().createElement(ye,{saveButtonLabel:I("common.create"),onSave:e=>{p(e),j(t,e)},onCancel:f,isLoading:B,existingProcessorName:n,malformedTransformationTemplate:m,schemaCatalog:U,getSchema:H})),r().createElement(fe,{action:v.current,message:h.current,showDialog:g,title:I("processor.errors.cantCreateProcessor")}))};var De=n(49150),ke=n.n(De),Pe=n(72836),xe=n.n(Pe);const je=e=>{const{schema:t,parameters:n}=e,{t:a}=(0,i.useTranslation)(["openbridgeTempDictionary"]);return r().createElement(r().Fragment,null,r().createElement(s.DescriptionList,null,t.properties&&Object.entries(t.properties).filter((([e,t])=>"processors"!==e&&(!(_e(t)&&t.type&&"string"==typeof t.type&&["object","array"].includes(t.type))||!("data_shape"!==e||!n[e])))).map((([e,o])=>{var i,l;return _e(o)?r().createElement(s.DescriptionListGroup,{key:e},Ne(e,o.title,o.description),Me(e,null!==(l=null===(i=t.properties)||void 0===i?void 0:i[e])&&void 0!==l?l:{},n[e],a)):r().createElement(r().Fragment,null)}))))},Ne=(e,t,n)=>{const a=null!=t?t:e.replace("_"," "),o=t?"":"processor-detail__derived-title";return n?r().createElement(s.DescriptionListTermHelpText,null,r().createElement(s.Popover,{bodyContent:n},r().createElement(s.DescriptionListTermHelpTextButton,{className:o},a))):r().createElement(s.DescriptionListTerm,{className:o},a)},Me=(e,t,n,a)=>{if(_e(t)){const{type:o,oneOf:i}=t,l=()=>r().createElement(s.DescriptionListDescription,{className:"processor-detail__property--not-set"},a("processor.propertyNotConfigured"));switch(o){case"object":return"data_shape"===e?r().createElement(Oe,{data:n}):n?r().createElement(s.DescriptionListDescription,null,JSON.stringify(n)):l();case"boolean":return void 0!==n?r().createElement(s.DescriptionListDescription,null,a(n?"common.yes":"common.no")):l();case"string":case"number":case"integer":return void 0!==n?r().createElement(s.DescriptionListDescription,null,n):l();default:if(void 0!==i){if(i.filter((e=>"boolean"!=typeof e&&"password"===(null==e?void 0:e.format)))&&"string"==typeof n)return r().createElement(s.DescriptionListDescription,null,n)}return l()}}return r().createElement(r().Fragment,null)},Oe=({data:e})=>r().createElement(r().Fragment,null,Object.keys(e).map((t=>{var n;return r().createElement(s.DescriptionListDescription,{key:t},null===(n=null==e?void 0:e[t])||void 0===n?void 0:n.format)}))),_e=e=>"boolean"!=typeof e,Ae=e=>{var t,n,o,l;const{processor:c,schemaCatalog:u,getSchema:d}=e,{t:p}=(0,i.useTranslation)(["openbridgeTempDictionary"]),[g,E]=(0,a.useState)(),[h,v]=(0,a.useState)(),[b,f]=(0,a.useState)(!1),T=c.type===S.XN.Source?c.source.type:c.action.type,y=c.type===S.XN.Source?c.source.parameters:c.action.parameters,C=c.type===S.XN.Source?X.j.SOURCE:X.j.ACTION,I=null!==(n=null===(t=u.find((e=>e.id===T)))||void 0===t?void 0:t.name)&&void 0!==n?n:"";return(0,a.useEffect)((()=>{c&&(f(!0),E(void 0),v(void 0),d(T,C).then((e=>E(e))).catch((e=>{e&&w().isAxiosError(e)&&(x(e)&&N(e)===A?v(p("processor.errors.cantFindParametersInfo")):v(p("processor.errors.parametersSectionGenericError")))})).finally((()=>f(!1))))}),[c,d,T,C,p]),r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"type"},p("processor.processorType")))),r().createElement(s.StackItem,null,r().createElement(s.Label,{color:"blue","data-testid":"processor-type-label"},p(`processor.${c.type}`))))),c.type===S.XN.Source&&r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"source-section"},p("processor.source")))),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"source-type"},r().createElement(s.DescriptionListTerm,null,p("processor.sourceType")),r().createElement(s.DescriptionListDescription,null,I)),g&&!h&&!b&&r().createElement(r().Fragment,null,r().createElement(je,{schema:g,parameters:y})),h&&r().createElement(s.Alert,{className:"processor-detail__alert",ouiaId:"error-schema",variant:"danger",title:h,"aria-live":"polite",isInline:!0}))))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"filters-section"},p("processor.filters")))),r().createElement(s.StackItem,null,(null===(o=c.filters)||void 0===o?void 0:o.length)?r().createElement(m.TableComposable,{variant:"compact",ouiaId:"filters-descriptions",borders:!0,className:"processor-detail__filters","data-ouia-component-id":"filters"},r().createElement(m.Thead,null,r().createElement(m.Tr,{ouiaId:"table-head"},r().createElement(m.Th,null,p("common.key")),r().createElement(m.Th,null,p("common.type")),r().createElement(m.Th,null,p("common.value")))),r().createElement(m.Tbody,null,null===(l=c.filters)||void 0===l?void 0:l.map((e=>r().createElement(m.Tr,{key:e.key,ouiaId:e.key},r().createElement(m.Td,null,e.key),r().createElement(m.Td,null,p(`processor.${e.type}`)),r().createElement(m.Td,null,q(e))))))):r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"no-filters"},p("processor.noFilters")))))),c.type===S.XN.Sink&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"transformation-section"},p("processor.transformation")))),c.transformationTemplate?r().createElement(r().Fragment,null,r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"transformation-template"},p("processor.transformationTemplate")))),r().createElement(s.StackItem,null,r().createElement(s.CodeBlock,{className:"processor-detail__transformation-template"},r().createElement(s.CodeBlockCode,null,c.transformationTemplate)))):r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"no-transformation"},p("processor.noTransformationTemplate")))))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"action-section"},p("processor.action")))),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"action-type"},r().createElement(s.DescriptionListTerm,null,p("processor.actionType")),r().createElement(s.DescriptionListDescription,null,I)),g&&!b&&r().createElement(r().Fragment,null,r().createElement(je,{schema:g,parameters:y})),h&&r().createElement(s.Alert,{className:"processor-detail__alert",ouiaId:"error-schema",variant:"danger",title:h,"aria-live":"polite",isInline:!0})))))))};const Be=()=>{const{t:e}=(0,i.useTranslation)(["openbridgeTempDictionary"]);return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{width:"150px",screenreaderText:e("processor.loadingProcessorType")})),r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{width:"80px"})))),r().createElement(Re,null),r().createElement(Re,{isLarge:!0}),r().createElement(Re,{isLarge:!0}))},Re=({isLarge:e=!1})=>r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"100px"})),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"action-type"},r().createElement(s.DescriptionListTerm,null,r().createElement(s.Skeleton,{fontSize:"md",width:"80px"})),r().createElement(s.DescriptionListDescription,null,r().createElement(s.Skeleton,{fontSize:"md",width:e?"600px":"160px"})))))));const Fe=()=>{var e,t,n;const{instanceId:m,processorId:u}=(0,o.useParams)(),d=(0,o.useHistory)(),{t:p}=(0,i.useTranslation)(["openbridgeTempDictionary"]),g=(0,a.useCallback)((()=>d.push(`/instance/${m}`)),[d,m]),[E,h]=(0,a.useState)(!1),[v,b]=(0,a.useState)(),[I,L]=(0,a.useState)(!1),[D,k]=(0,a.useState)(),[P,j]=(0,a.useState)(),[_,F]=(0,a.useState)(),[G,U]=(0,a.useState)(!1),H=(0,a.useRef)(""),Q=(0,a.useRef)((()=>U(!1))),{getBridge:Z,bridge:K,isLoading:W,error:Y}=y();(0,a.useEffect)((()=>{Z(m)}),[Z,m]);const{getProcessor:X,processor:J,isLoading:q,error:ee}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!0),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{getProcessor:(0,a.useCallback)(((e,n)=>{new S.dU(new S.VK({accessToken:i,basePath:l})).getProcessor(e,n).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))}),[i,l]),isLoading:o,processor:e,error:n}}();(0,a.useEffect)((()=>{X(m,u)}),[X,m,u]);const{updateProcessor:te,processor:ne,isLoading:ae,error:re}=function(){const[e,t]=(0,a.useState)(),[n,r]=(0,a.useState)(),[o,s]=(0,a.useState)(!1),{getToken:i,apiBaseUrl:l}=(0,T.D)();return{updateProcessor:(e,n,a)=>{s(!0),r(void 0),t(void 0),new S.dU(new S.VK({accessToken:i,basePath:l})).updateProcessor(e,n,a).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,processor:e,error:n}}(),{schemas:oe,isLoading:se,error:ie}=Ie(),{getSchema:le,error:ce}=Le();(0,a.useEffect)((()=>{b(J)}),[J]),(0,a.useEffect)((()=>{b(ne),h(!1)}),[ne]),(0,a.useEffect)((()=>{var e;if(Y&&w().isAxiosError(Y)){if(!x(Y)||N(Y)!==A)throw new $(r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},null!==(e=null==J?void 0:J.name)&&void 0!==e?e:p("common.processor"))),p("processor.errors.instanceDetailsGenericError"));d.replace("/processor-instance-not-found",{title:p("instance.notFound"),message:p("processor.errors.cantFindInstance")})}}),[Y,d,null==J?void 0:J.name,p]),(0,a.useEffect)((()=>{var e;if(ee&&w().isAxiosError(ee)){if(!x(ee)||N(ee)!==A)throw new $(r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},null!==(e=null==J?void 0:J.name)&&void 0!==e?e:p("common.processor"))),p("processor.errors.processorDetailsGenericError"));d.replace("/processor-not-found",{title:p("processor.notFound"),message:p("processor.errors.cantFindProcessor")})}}),[d,null==J?void 0:J.name,ee,p]),(0,a.useEffect)((()=>{var e;if(ie&&w().isAxiosError(ie))throw new $(r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},null!==(e=null==J?void 0:J.name)&&void 0!==e?e:p("common.processor"))),p("processor.errors.processorDetailsGenericError"))}),[null==J?void 0:J.name,ie,p]),(0,a.useEffect)((()=>{var e;re&&w().isAxiosError(re)&&(x(re)&&N(re)===O?k(null==_?void 0:_.name):x(re)&&N(re)===B?(U(!0),Q.current=()=>{U(!1),g()},H.current=p("processor.errors.cantUpdateProcessorBecauseNotReadyState")):x(re)&&N(re)===R?j(null!==(e=M(re))&&void 0!==e?e:p("processor.errors.malformedTransformation")):(U(!0),Q.current=()=>{U(!1)},H.current=p("common.tryAgainLater")))}),[g,null==_?void 0:_.name,p,re]);const me=(0,a.useCallback)(((e,t)=>xe()(e,t,((e,t)=>ke()(e.name,t.name)&&ke()(e.filters,t.filters)&&ke()(e.transformationTemplate,t.transformationTemplate)&&ke()(e.action,t.action)&&ke()(e.source,t.source)))),[]),ue=(0,a.useCallback)((e=>{v&&me(v,e)?h(!1):(F(e),te(m,u,e))}),[v,m,u,me,te]),[de,pe]=(0,a.useState)(!1),ge=(0,a.useCallback)((()=>{pe(!1),g()}),[g]),Ee=[r().createElement(s.DropdownItem,{key:"delete",ouiaId:"delete",component:"button",onClick:()=>{pe(!0)},isDisabled:!v||!V(v.status)},p("processor.delete"))];return r().createElement(r().Fragment,null,(W||q||se)&&r().createElement(r().Fragment,null,r().createElement(C,{pageTitle:p("processor.loadingProcessor"),hasEditButton:!0,hasActionDropdown:!0,hasLabel:!0}),r().createElement(Be,null)),K&&v&&oe&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0,type:"breadcrumb"},r().createElement(l,{path:[{label:p("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=K.name)&&void 0!==e?e:"",linkTo:`/instance/${m}`},{label:null!==(t=v.name)&&void 0!==t?t:""}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1",ouiaId:"processor-name"},v.name))),r().createElement(s.StackItem,null,r().createElement(f,{status:null!==(n=v.status)&&void 0!==n?n:""})))),!E&&r().createElement(s.SplitItem,null,r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,null,r().createElement(s.Button,{isAriaDisabled:v.status!==S.gj.Ready||void 0!==ce,ouiaId:"edit",onClick:()=>h(!0)},p("common.edit"))),r().createElement(s.SplitItem,null,r().createElement(s.Dropdown,{ouiaId:"processor-actions",onSelect:()=>{L(!I)},alignments:{sm:"right"},toggle:r().createElement(s.DropdownToggle,{id:"toggle-id",ouiaId:"actions-toggle",onToggle:e=>{L(e)},toggleIndicator:c.CaretDownIcon},p("common.actions")),isOpen:I,dropdownItems:Ee})))))),E?r().createElement(ye,{processor:v,isLoading:ae,saveButtonLabel:p("common.save"),onSave:ue,onCancel:()=>{j(void 0),h(!1)},existingProcessorName:D,malformedTransformationTemplate:P,schemaCatalog:oe,getSchema:le}):r().createElement(r().Fragment,null,r().createElement(Ae,{processor:v,schemaCatalog:oe,getSchema:le}),r().createElement(z,{showDeleteModal:de,bridgeId:K.id,processorId:v.id,processorName:v.name,onDeleted:ge,onCanceled:()=>pe(!1)}))),r().createElement(fe,{action:Q.current,message:H.current,showDialog:G,title:p("processor.errors.cantUpdateProcessor")}))};var Ge=n(56391),Ue=n(64120);const Ve=({children:e})=>{const{t}=(0,i.useTranslation)(["openbridgeTempDictionary"]),n=(0,o.useHistory)();return r().createElement(Ge.ErrorBoundary,{fallbackRender:({error:e,resetErrorBoundary:a})=>{var o;const i=n.listen((()=>{a(),i()})),l=null!==(o=e.detailSection)&&void 0!==o?o:r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1"},t("common.genericError"))),c=e.detailSection?`${e.message} ${t("common.tryAgainLater")}`:`${t("common.tryAgainLater")}`;return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},l),r().createElement(s.PageSection,null,r().createElement(Ue.AppServicesEmptyState,{emptyStateBodyProps:{body:c},emptyStateProps:{variant:Ue.EmptyStateVariant.UnexpectedError},titleProps:{headingLevel:"h1",title:t("common.unexpectedError")}})))}},e)},ze=()=>r().createElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiCgkJIHZpZXdCb3g9IjAgMCAxMDAgMTA5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgMTA5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6bm9uZTtzdHJva2U6IzZBNkU3MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTozLDU7fQoJLnN0MXtmaWxsOiNGRkZGRkY7c3Ryb2tlOiM2QTZFNzM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCS5zdDJ7ZmlsbDojNkE2RTczO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyLjUsOTYuNWMzLTMzLDE3LjQtMzUuOCwzOC0yNGMxOS4xLDExLDM2LTguMSwyMS0yN2MtMTUuNC0xOS40LTgtMjMtOC0yMyIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTMsMjV2NTAgTTI3LjgsNzEuOFYxMDQgTTI3LjgsMTV2NDcuNiBNNDIuNiw3NHYzNCBNNDIuNiwxMHY1NC4yIE01Ny40LDc5LjJWMTA4IE01Ny40LDMydjM4IE03Mi4yLDc3djI3CgkgTTcyLjIsNTQuOHY5LjUgTTcyLjIsMjl2MTAuMiBNODcsMjV2NjggTTU2LDIyLjVsLTQwLTAuMiBNNTkuNiwzNy4xTDUsMzcuMSBNNTkuNiwzNy4xIE05NSwzNy4xbC0yNC4xLDAgTTcwLjQsNTEuOUwxLDUxLjkKCSBNNzAuNCw1MS45IE04MC44LDUxLjkgTTk5LDUxLjlsLTE4LjIsMCBNMTguNiw2Ni42TDEsNjYuNiBNNzAuNCw2Ni42bC0yMS45LDAgTTk5LDY2LjZsLTE3LjksMCBNMTAuNSw4MS40SDYgTTk1LDgxLjRsLTc1LDAKCSBNODQsOTYuMmwtNjcsMCIvPgo8Zz4KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik04MS4zLDE1LjdjLTAuOSwxLjUtMi4xLDIuNy0zLjYsMy42Yy0xLjUsMC45LTMuMiwxLjMtNSwxLjNzLTMuNC0wLjQtNS0xLjNjLTEuNS0wLjktMi43LTIuMS0zLjYtMy42CgkJYy0wLjktMS41LTEuMy0zLjItMS4zLTVzMC40LTMuNCwxLjMtNWMwLjktMS41LDIuMS0yLjcsMy42LTMuNmMxLjUtMC45LDMuMi0xLjMsNS0xLjNzMy40LDAuNCw1LDEuM2MxLjUsMC45LDIuNywyLjEsMy42LDMuNgoJCWMwLjksMS41LDEuMywzLjIsMS4zLDVTODIuMiwxNC4yLDgxLjMsMTUuN3ogTTcwLjMsNC44Yy0wLjcsMC40LTEuNCwxLTEuOSwxLjljLTAuMSwwLjEtMC4xLDAuMi0wLjEsMC4zYzAsMC4xLDAuMSwwLjIsMC4yLDAuMwoJCWwxLjQsMWMwLjEsMC4xLDAuMiwwLjEsMC4zLDAuMWMwLjEsMCwwLjItMC4xLDAuMy0wLjJjMC40LTAuNSwwLjgtMC45LDEtMWMwLjQtMC4zLDAuOC0wLjQsMS4zLTAuNGMwLjUsMCwwLjksMC4xLDEuMywwLjQKCQljMC40LDAuMywwLjYsMC42LDAuNiwwLjljMCwwLjMtMC4xLDAuNS0wLjQsMC44Yy0wLjIsMC4xLTAuNSwwLjMtMC45LDAuNmwtMC4xLDBjLTAuNywwLjQtMS4xLDAuNy0xLjQsMWMtMC41LDAuNS0wLjcsMS4xLTAuNywxLjgKCQl2MC4yYzAsMC4xLDAsMC4yLDAuMSwwLjNjMC4xLDAuMSwwLjIsMC4xLDAuMywwLjFoMi4yYzAuMSwwLDAuMiwwLDAuMy0wLjFjMC4xLTAuMSwwLjEtMC4yLDAuMS0wLjN2MGMwLTAuMiwwLjEtMC40LDAuMy0wLjYKCQljMC4xLTAuMSwwLjQtMC4zLDAuOC0wLjVjMC43LTAuNCwxLjItMC44LDEuNS0xLjFjMC41LTAuNiwwLjgtMS4zLDAuOC0yLjFjMC0wLjctMC4yLTEuNC0wLjctMi4xcy0xLTEuMS0xLjgtMS41cy0xLjUtMC41LTIuMi0wLjUKCQlDNzIsNC4yLDcxLjEsNC40LDcwLjMsNC44eiBNNzEuNSwxNC42Yy0wLjQsMC40LTAuNSwwLjgtMC41LDEuM3MwLjIsMC45LDAuNSwxLjNzMC44LDAuNSwxLjMsMC41czAuOS0wLjIsMS4zLTAuNXMwLjUtMC44LDAuNS0xLjMKCQlzLTAuMi0wLjktMC41LTEuM3MtMC44LTAuNS0xLjMtMC41UzcxLjgsMTQuMiw3MS41LDE0LjZ6Ii8+CjwvZz4KPC9zdmc+Cg==",alt:"Not found page",width:"128px"}),$e=()=>{var e,t,n,a;const l=(0,o.useLocation)(),{t:c}=(0,i.useTranslation)(["openbridgeTempDictionary"]);return r().createElement(s.EmptyState,null,r().createElement(s.EmptyStateIcon,{icon:ze}),r().createElement(s.Title,{headingLevel:"h4",size:"lg"},null!==(t=null===(e=l.state)||void 0===e?void 0:e.title)&&void 0!==t?t:c("common.pageNotFound")),r().createElement(s.EmptyStateBody,null,null!==(a=null===(n=l.state)||void 0===n?void 0:n.message)&&void 0!==a?a:c("common.pageDoesNotExistError")))},He=()=>r().createElement(Ve,null,r().createElement(o.Switch,null,r().createElement(o.Route,{exact:!0,path:"/"},r().createElement(Y,null)),r().createElement(o.Route,{path:"/instance/:instanceId/processor/:processorId"},r().createElement(Fe,null)),r().createElement(o.Route,{path:"/instance/:instanceId/create-processor"},r().createElement(we,null)),r().createElement(o.Route,{path:"/instance/:instanceId"},r().createElement(H,null)),r().createElement(o.Route,{path:"*",component:$e})))},20807:(e,t,n)=>{n.d(t,{E:()=>s,D:()=>i});var a=n(75418),r=n.n(a);const o=(0,a.createContext)(null),s=({getToken:e,getUsername:t,apiBaseUrl:n,children:a})=>r().createElement(o.Provider,{value:{getToken:e,getUsername:t,apiBaseUrl:n}},a),i=()=>{const e=(0,a.useContext)(o);if(!e)throw new Error("useSmartEvents must be used inside an SmartEventsContextProvider");return Object.assign({},e)}},49325:(e,t,n)=>{var a,r;n.d(t,{v:()=>a,j:()=>r}),function(e){e.STRING_EQUALS="StringEquals",e.STRING_CONTAINS="StringContains",e.STRING_BEGINS="StringBeginsWith",e.STRING_IN="StringIn",e.NUMBER_IN="NumberIn"}(a||(a={})),function(e){e.ACTION="action",e.SOURCE="source"}(r||(r={}))}}]);
//# sourceMappingURL=3177.de115e55.js.map