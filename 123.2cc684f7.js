"use strict";(self.webpackChunksmartevents_ui=self.webpackChunksmartevents_ui||[]).push([[123],{18610:(e,t,a)=>{a.d(t,{Z:()=>he});var n=a(75418),r=a.n(n),o=a(98068),s=a(99922),l=a(39799);const i=({path:e})=>r().createElement(s.Breadcrumb,{ouiaId:"breadcrumb"},e.map(((t,a)=>{const n=a===e.length-1;return r().createElement(s.BreadcrumbItem,{"data-ouia-component-type":"breadcrumb-item","data-ouia-component-id":t.label,key:a,isActive:n,render:({className:e})=>t.linkTo?r().createElement(o.Link,{to:t.linkTo,className:e},t.label):t.label})})));var c=a(67646),m=a(28251),d=a(22013);const u=({ariaLabel:e="Table",columns:t,cssClasses:a,rows:n,variant:o,children:s,renderActions:l})=>r().createElement(m.TableComposable,{className:(0,d.css)(a),variant:o,"aria-label":e,ouiaId:e},r().createElement(m.Thead,null,r().createElement(m.Tr,{ouiaId:"table-head"},(e=>e.map((e=>e.label)))(t).map((e=>r().createElement(m.Th,{key:e},e))))),!n.length&&s?r().createElement(m.Tbody,null,r().createElement(m.Tr,{ouiaId:"no-data"},r().createElement(m.Td,{colSpan:t.length},s))):r().createElement(m.Tbody,null,((e,t)=>e.map((e=>({cells:t.map((t=>{var a;const n=t.accessor;return(null!==(a=t.formatter)&&void 0!==a?a:e=>e)(e[n],e)})),originalData:e}))))(n,t).map(((e,t)=>{var a,n,o,s;return r().createElement(m.Tr,{ouiaId:null===(a=e.originalData)||void 0===a?void 0:a.name,key:null!==(o=null===(n=e.originalData)||void 0===n?void 0:n.id)&&void 0!==o?o:t},null===(s=null==e?void 0:e.cells)||void 0===s?void 0:s.map(((e,t)=>r().createElement(m.Td,{key:t},e))),l&&r().createElement(m.Td,{className:"pf-c-table__action"},l({row:e,ActionsColumn:m.ActionsColumn})))})))),p=({className:e,itemCount:t,page:a,perPage:n,onChange:o,isCompact:l=!1,variant:i,ouiaId:c})=>r().createElement(s.Pagination,{"data-ouia-component-type":"pagination-control",ouiaId:c,className:e,style:{float:"right"},itemCount:t,page:a,perPage:n,perPageOptions:[{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],onSetPage:(e,t)=>o(t,n),onPerPageSelect:(e,t)=>o(a,t),isCompact:l,variant:i}),g=({columns:e,totalRows:t,hasActionColumn:a})=>r().createElement(m.TableComposable,{"aria-label":"table-skeleton"},r().createElement(m.Thead,null,r().createElement(m.Tr,null,e.map((e=>r().createElement(m.Th,{key:e.label},e.label))))),r().createElement(m.Tbody,null,[...Array(t).keys()].map((t=>r().createElement(m.Tr,{key:t},e.map(((e,t)=>r().createElement(m.Td,{key:t},r().createElement(s.Skeleton,{key:e.label})))),a&&r().createElement(m.Td,{className:"pf-c-table__action"},r().createElement(m.ActionsColumn,null))))))),E=({columns:e,customToolbarElement:t,isLoading:a,rows:n,totalRows:o,pageNumber:l,pageSize:i,onPaginationChange:c,tableLabel:m,children:d,renderActions:E})=>{const b=e=>r().createElement(p,Object.assign({itemCount:o,page:l+1,perPage:i,isCompact:!e},e?{variant:s.PaginationVariant.bottom}:{},{onChange:(e,t)=>c(e-1,t),ouiaId:e?"rows-bottom":"rows-top"}));return r().createElement(s.Card,{ouiaId:m},r().createElement(s.Toolbar,{ouiaId:"rows-toolbar"},r().createElement(s.ToolbarContent,null,r().createElement(s.ToolbarItem,{className:"overview__toolbar-custom",alignment:{default:"alignLeft"}},t),r().createElement(s.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},b(!1)))),a?r().createElement(g,{columns:e,totalRows:i,hasActionColumn:!0}):r().createElement(u,{ariaLabel:m,columns:e,cssClasses:"overview__table",rows:n,renderActions:E},d),b(!0))};var b=a(77946),h=a(95639);const f=({instance:e,onClosingDetails:t})=>{const{t:a}=(0,l.useTranslation)(["openbridgeTempDictionary"]),n=e=>(0,h.Z)(new Date(e),"PPPP p");return r().createElement(s.DrawerPanelContent,{widths:{default:"width_33"},"data-ouia-component-id":"instance-details-panel"},r().createElement(s.DrawerHead,null,r().createElement(s.Stack,null,r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-details-name-label",component:"small"},a("common.name")))),r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-details-name",component:"h2"},e.name)))),r().createElement(s.DrawerActions,null,r().createElement(s.DrawerCloseButton,{onClick:t,"data-ouia-component-id":"close-instance-details"}))),r().createElement(s.DrawerContentBody,null,r().createElement(s.DescriptionList,{isHorizontal:!0,isCompact:!0},r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,a("common.id")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-id"},e.id)),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,a("common.url")),r().createElement(s.DescriptionListDescription,null,r().createElement(s.ClipboardCopy,{"data-ouia-component-id":"instance-details-endpoint",isReadOnly:!0,hoverTip:a("common.copy"),clickTip:a("common.copied")},e.endpoint))),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,a("common.submittedAt")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-submitted-date"},e.submitted_at&&n(e.submitted_at))),r().createElement(s.DescriptionListGroup,null,r().createElement(s.DescriptionListTerm,null,a("common.publishedAt")),r().createElement(s.DescriptionListDescription,{"data-ouia-component-id":"instance-details-published-date"},e.published_at&&n(e.published_at))))))},v=e=>{const{status:t}=e;return r().createElement(s.Label,{color:"ready"===t?"green":"grey",icon:"ready"===t?r().createElement(c.CheckCircleIcon,null):null,style:{textTransform:"capitalize"},variant:"outline"},t)};var T=a(70655),S=a(9669),y=a.n(S);const I="http://localhost".replace(/\/+$/,"");class k{constructor(e,t=I,a=y()){this.basePath=t,this.axios=a,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class C extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const P="https://example.com",w=function(e,t,a){if(null==a)throw new C(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},D=function(e,t){return(0,T.__awaiter)(this,void 0,void 0,(function*(){if(t&&t.accessToken){const a="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+a}}))},x=function(e,...t){const a=new URLSearchParams(e.search);for(const e of t)for(const t in e)if(Array.isArray(e[t])){a.delete(t);for(const n of e[t])a.append(t,n)}else a.set(t,e[t]);e.search=a.toString()},O=function(e,t,a){const n="string"!=typeof e;return(n&&a&&a.isJsonMime?a.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},L=function(e){return e.pathname+e.search+e.hash},B=function(e,t,a,n){return(r=t,o=a)=>{const s=Object.assign(Object.assign({},e.options),{url:((null==n?void 0:n.basePath)||o)+e.url});return r.request(s)}},j=function(e){const t=function(e){return{createBridge:(t,a={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){const n=new URL("/api/v1/bridges",P);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"POST"},r),a),s={};yield D(s,e),s["Content-Type"]="application/json",x(n,{});let l=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),l),a.headers),o.data=O(t,o,e),{url:L(n),options:o}})),deleteBridge:(t,a={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("deleteBridge","bridgeId",t);const n="/api/v1/bridges/{bridgeId}".replace("{bridgeId}",encodeURIComponent(String(t))),r=new URL(n,P);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"DELETE"},o),a),l={};yield D(l,e),x(r,{});let i=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},l),i),a.headers),{url:L(r),options:s}})),getBridge:(t,a={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("getBridge","bridgeId",t);const n="/api/v1/bridges/{bridgeId}".replace("{bridgeId}",encodeURIComponent(String(t))),r=new URL(n,P);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),a),l={};yield D(l,e),x(r,{});let i=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},l),i),a.headers),{url:L(r),options:s}})),getBridges:(t,a,n={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){const r=new URL("/api/v1/bridges",P);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),l={},i={};yield D(l,e),void 0!==t&&(i.page=t),void 0!==a&&(i.size=a),x(r,i);let c=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},l),c),n.headers),{url:L(r),options:s}}))}}(e);return{createBridge(a,n){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const r=yield t.createBridge(a,n);return B(r,y(),I,e)}))},deleteBridge(a,n){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const r=yield t.deleteBridge(a,n);return B(r,y(),I,e)}))},getBridge(a,n){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const r=yield t.getBridge(a,n);return B(r,y(),I,e)}))},getBridges(a,n,r){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const o=yield t.getBridges(a,n,r);return B(o,y(),I,e)}))}}};class _ extends k{createBridge(e,t){return j(this.configuration).createBridge(e,t).then((e=>e(this.axios,this.basePath)))}deleteBridge(e,t){return j(this.configuration).deleteBridge(e,t).then((e=>e(this.axios,this.basePath)))}getBridge(e,t){return j(this.configuration).getBridge(e,t).then((e=>e(this.axios,this.basePath)))}getBridges(e,t,a){return j(this.configuration).getBridges(e,t,a).then((e=>e(this.axios,this.basePath)))}}const F=function(e){const t=function(e){return{addProcessorToBridge:(t,a,n={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("addProcessorToBridge","bridgeId",t);const r="/api/v1/bridges/{bridgeId}/processors".replace("{bridgeId}",encodeURIComponent(String(t))),o=new URL(r,P);let s;e&&(s=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},s),n),i={};yield D(i,e),i["Content-Type"]="application/json",x(o,{});let c=s&&s.headers?s.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},i),c),n.headers),l.data=O(a,l,e),{url:L(o),options:l}})),deleteProcessor:(t,a,n={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("deleteProcessor","bridgeId",t),w("deleteProcessor","processorId",a);const r="/api/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(a))),o=new URL(r,P);let s;e&&(s=e.baseOptions);const l=Object.assign(Object.assign({method:"DELETE"},s),n),i={};yield D(i,e),x(o,{});let c=s&&s.headers?s.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},i),c),n.headers),{url:L(o),options:l}})),getProcessor:(t,a,n={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("getProcessor","bridgeId",t),w("getProcessor","processorId",a);const r="/api/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(a))),o=new URL(r,P);let s;e&&(s=e.baseOptions);const l=Object.assign(Object.assign({method:"GET"},s),n),i={};yield D(i,e),x(o,{});let c=s&&s.headers?s.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},i),c),n.headers),{url:L(o),options:l}})),listProcessors:(t,a,n,r={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("listProcessors","bridgeId",t);const o="/api/v1/bridges/{bridgeId}/processors".replace("{bridgeId}",encodeURIComponent(String(t))),s=new URL(o,P);let l;e&&(l=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},l),r),c={},m={};yield D(c,e),void 0!==a&&(m.page=a),void 0!==n&&(m.size=n),x(s,m);let d=l&&l.headers?l.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},c),d),r.headers),{url:L(s),options:i}})),updateProcessor:(t,a,n,r={})=>(0,T.__awaiter)(this,void 0,void 0,(function*(){w("updateProcessor","bridgeId",t),w("updateProcessor","processorId",a);const o="/api/v1/bridges/{bridgeId}/processors/{processorId}".replace("{bridgeId}",encodeURIComponent(String(t))).replace("{processorId}",encodeURIComponent(String(a))),s=new URL(o,P);let l;e&&(l=e.baseOptions);const i=Object.assign(Object.assign({method:"PUT"},l),r),c={};yield D(c,e),c["Content-Type"]="application/json",x(s,{});let m=l&&l.headers?l.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},c),m),r.headers),i.data=O(n,i,e),{url:L(s),options:i}}))}}(e);return{addProcessorToBridge(a,n,r){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const o=yield t.addProcessorToBridge(a,n,r);return B(o,y(),I,e)}))},deleteProcessor(a,n,r){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const o=yield t.deleteProcessor(a,n,r);return B(o,y(),I,e)}))},getProcessor(a,n,r){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const o=yield t.getProcessor(a,n,r);return B(o,y(),I,e)}))},listProcessors(a,n,r,o){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const s=yield t.listProcessors(a,n,r,o);return B(s,y(),I,e)}))},updateProcessor(a,n,r,o){return(0,T.__awaiter)(this,void 0,void 0,(function*(){const s=yield t.updateProcessor(a,n,r,o);return B(s,y(),I,e)}))}}};class R extends k{addProcessorToBridge(e,t,a){return F(this.configuration).addProcessorToBridge(e,t,a).then((e=>e(this.axios,this.basePath)))}deleteProcessor(e,t,a){return F(this.configuration).deleteProcessor(e,t,a).then((e=>e(this.axios,this.basePath)))}getProcessor(e,t,a){return F(this.configuration).getProcessor(e,t,a).then((e=>e(this.axios,this.basePath)))}listProcessors(e,t,a,n){return F(this.configuration).listProcessors(e,t,a,n).then((e=>e(this.axios,this.basePath)))}updateProcessor(e,t,a,n){return F(this.configuration).updateProcessor(e,t,a,n).then((e=>e(this.axios,this.basePath)))}}class G{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}const N="ready",V="failed";var A=a(20807);function U(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!0),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{getBridge:(0,n.useCallback)((e=>{new _(new G({accessToken:l,basePath:i})).getBridge(e).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))}),[l,i]),isLoading:o,bridge:e,error:a}}const q=e=>{const{pageTitle:t,hasEditButton:a=!1,hasActionDropdown:n,hasLabel:o,totalTabs:l=0}=e;return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:0===l,type:"breadcrumb"},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"140px"})),r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"140px"})))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:0===l},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"20%",screenreaderText:t})),o&&r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"md",width:"80px"})))),a&&r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"60px"})),n&&r().createElement(s.SplitItem,null,r().createElement(s.Skeleton,{fontSize:"2xl",width:"100px"})))),l>0&&r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"tabs"},r().createElement(s.Tabs,{usePageInsets:!0},[...Array(l).keys()].map((e=>r().createElement(s.Tab,{key:e,eventKey:e,title:r().createElement(s.Skeleton,{fontSize:"xl",width:"100px"})}))))))},$=e=>r().createElement(s.Card,{ouiaId:"loading-table"},r().createElement(s.Toolbar,null,r().createElement(s.ToolbarContent,null,r().createElement(s.ToolbarItem,{alignment:{default:"alignLeft"}},e.customToolbarElement),r().createElement(s.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(s.Skeleton,{width:"190px"})))),r().createElement(g,Object.assign({},e)),r().createElement("div",{className:"pf-c-pagination pf-m-bottom"},r().createElement(s.Skeleton,{width:"320px"})));function z(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!0),l=(0,n.useRef)(),{getToken:i,apiBaseUrl:c}=(0,A.D)();return{getProcessors:(0,n.useCallback)(((e,a,n,o)=>{var m;s(!o),null===(m=l.current)||void 0===m||m.cancel();const d=y().CancelToken.source();l.current=d;new R(new G({accessToken:i,basePath:c})).listProcessors(e,a,n,{cancelToken:d.token}).then((e=>{t(e.data),s(!1)})).catch((e=>{y().isCancel(e)||(r(e),s(!1))}))}),[i,c]),isLoading:o,processorListResponse:e,error:a}}function M(e,t){const a=(0,n.useRef)(e);(0,n.useEffect)((()=>{a.current=e}),[e]),(0,n.useEffect)((()=>{if(t<=0)return;const e=setInterval((()=>a.current()),t);return()=>clearInterval(e)}),[t])}const K=e=>{const{ouiaId:t,modalTitle:a,resourceName:o,resourceType:i,onCancel:c,onConfirm:m,showDialog:d,isPreloading:u,isLoading:p,blockedDeletionReason:g}=e,{t:E}=(0,l.useTranslation)("openbridgeTempDictionary"),[b,h]=(0,n.useState)(""),f=b===o,v=()=>{h(""),c()};(0,n.useEffect)((()=>{h("")}),[o]);const T=[r().createElement(s.Button,{ouiaId:"confirm",key:"confirm",variant:"danger",isDisabled:!f||p,isLoading:p,onClick:()=>{m()}},E("common.delete")),r().createElement(s.Button,{ouiaId:"cancel",key:"cancel",variant:"link",onClick:v,isDisabled:p},E("common.cancel"))],S=[r().createElement(s.Button,{ouiaId:"close",key:"close",onClick:v},E("common.close"))];return r().createElement(s.Modal,{ouiaId:t,variant:s.ModalVariant.small,title:a,titleIconVariant:"warning",isOpen:d,onClose:c,actions:g?S:T},r().createElement(s.ModalBoxBody,null,u&&r().createElement(s.Bullseye,{className:"delete-modal-body__bullseye"},r().createElement(s.Spinner,{isSVG:!0,size:"lg","aria-label":E("common.loading")})),!u&&g&&r().createElement(s.Bullseye,{className:"delete-modal-body__bullseye"},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p},g))),!u&&!g&&r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p},r().createElement(l.Trans,{i18nKey:"openbridgeTempDictionary:common.resourceWillBeDeletedHTML",values:{type:i,name:o}})))),r().createElement(s.StackItem,null,r().createElement(s.Form,{onSubmit:e=>e.preventDefault()},r().createElement(s.FormGroup,{label:r().createElement(l.Trans,{i18nKey:"openbridgeTempDictionary:common.typeNameToConfirmHTML",values:{name:o}}),fieldId:"delete-confirmation-value"},r().createElement(s.TextInput,{id:"delete-confirmation-value",ouiaId:"delete-confirmation-value",value:b,type:"text",onChange:h,isDisabled:p,"aria-label":"delete-confirmation-value",autoComplete:"off",validated:f?s.ValidatedOptions.success:s.ValidatedOptions.default})))))))};const W=e=>{const{t}=(0,l.useTranslation)(["openbridgeTempDictionary"]),{showDeleteModal:a,instanceId:o,instanceName:s,onDeleted:i,onCanceled:c}=e,[m,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(),{getProcessors:g,processorListResponse:E}=z();(0,n.useEffect)((()=>{a&&o&&s&&(d(!0),g(o))}),[a,o,s,g]),(0,n.useEffect)((()=>{E&&(d(!1),E.total&&E.total>0&&p(t("instance.errors.cantDeleteBecauseProcessorsInside")))}),[E,t]);const{deleteBridge:b,isLoading:h,success:f,error:v}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(!1),[o,s]=(0,n.useState)(),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{deleteBridge:e=>{s(void 0),t(void 0),r(!0),new _(new G({accessToken:l,basePath:i})).deleteBridge(e).then((()=>s(!0))).catch((e=>{t(e),s(!1)})).finally((()=>r(!1)))},isLoading:a,success:o,error:e}}();return(0,n.useEffect)((()=>{var e;f&&i(),v&&y().isAxiosError(v)&&"OPENBRIDGE-2"===(null===(e=v.response)||void 0===e?void 0:e.data).code&&p(t("instance.errors.cantDeleteBecauseProcessorsInside"))}),[f,v,i,t]),r().createElement(r().Fragment,null,o&&s&&r().createElement(K,{ouiaId:"delete-instance",modalTitle:"Delete Smart Events Instance?",showDialog:a,resourceType:"Instance",resourceName:s,isPreloading:m,blockedDeletionReason:u,isLoading:h,onCancel:()=>{p(void 0),c()},onConfirm:()=>{o&&b(o)}}))},H=e=>e===N||e===V;const J=e=>{const{t}=(0,l.useTranslation)(["openbridgeTempDictionary"]),{showDeleteModal:a,bridgeId:o,processorId:s,processorName:i,onDeleted:c,onCanceled:m}=e,{deleteProcessor:d,isLoading:u,error:p,success:g}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(!1),[o,s]=(0,n.useState)(),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{deleteProcessor:(e,a)=>{s(void 0),t(void 0),r(!0),new R(new G({accessToken:l,basePath:i})).deleteProcessor(e,a).then((()=>s(!0))).catch((e=>{t(e),s(!1)})).finally((()=>r(!1)))},isLoading:a,success:o,error:e}}();return(0,n.useEffect)((()=>{g&&c()}),[g,c]),(0,n.useEffect)((()=>{p&&console.error(p)}),[p]),r().createElement(r().Fragment,null,s&&i&&r().createElement(K,{ouiaId:"delete-processor",modalTitle:t("processor.deleteProcessor"),showDialog:a,isPreloading:!1,resourceType:t("common.processor"),resourceName:i,isLoading:u,onCancel:()=>{m()},onConfirm:()=>{o&&s&&d(o,s)}}))},Z=()=>{var e;const{instanceId:t}=(0,o.useParams)(),{t:a}=(0,l.useTranslation)(["openbridgeTempDictionary"]),m=(0,o.useLocation)(),d=(0,o.useHistory)(),u=(0,n.useCallback)((()=>d.push("/")),[d]),p=r().createRef(),[g,h]=(0,n.useState)(0),[T,S]=(0,n.useState)(10),[y,I]=(0,n.useState)(),[k,C]=(0,n.useState)(0),[P,w]=(0,n.useState)(!1),[D,x]=(0,n.useState)(!1),{getBridge:O,bridge:L,isLoading:B,error:j}=U();(0,n.useEffect)((()=>{O(t)}),[O,t]);const{getProcessors:_,processorListResponse:F,isLoading:R,error:G}=z(),N=(0,n.useCallback)((()=>_(t,g,T,!0)),[g,T,_,t]);M((()=>N()),1e4),(0,n.useEffect)((()=>_(t,0,10)),[_,t]),(0,n.useEffect)((()=>{var e,t;F&&(h(null!==(e=F.page)&&void 0!==e?e:0),I(null!==(t=F.total)&&void 0!==t?t:0))}),[F]),(0,n.useEffect)((()=>{j&&(console.error(j),u()),G&&console.error(G)}),[j,u,G]);const V=[{accessor:"name",label:a("common.name"),formatter:(e,t)=>{var a,n;const s=null!==(n=null===(a=t)||void 0===a?void 0:a.id)&&void 0!==n?n:"";return r().createElement(o.Link,{"data-testid":"tableProcessors-linkProcessor",to:`${m.pathname}/processor/${s}`},e)}},{accessor:"id",label:a("common.id")},{accessor:"type",label:a("common.type"),formatter:e=>{const t=e;return t&&t.length?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}},{accessor:"status",label:a("common.status"),formatter:e=>{var t;const a=null!==(t=e)&&void 0!==t?t:"";return r().createElement(v,{status:a})}},{accessor:"submitted_at",label:a("common.submittedAt"),formatter:e=>{const t=new Date(e);return(0,b.Z)(t,new Date)+" "+a("common.ago")}}],A=r().createElement(o.Link,{to:`${m.pathname}/create-processor`},r().createElement(s.Button,{ouiaId:"create-processor",variant:"primary"},a("processor.createProcessor"))),K=(0,n.useCallback)(((e,a)=>{const n=a===T?e:0;h(n),S(a),_(t,n,a)}),[T,_,t]),[Z,X]=(0,n.useState)(!1),[Q,Y]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),ae=(0,n.useCallback)((()=>{X(!1),d.push("/")}),[d]),[ne,re]=(0,n.useState)(!1),oe=(0,n.useCallback)((()=>{re(!1),_(t,g,T)}),[_,t,g,T]),se=e=>[{title:a("common.delete"),onClick:()=>{const t=e.originalData.id,a=e.originalData.name;t&&a&&((e,t)=>{Y(e),te(t),re(!0)})(t,a)},isDisabled:!H(e.originalData.status)}];return r().createElement(r().Fragment,null,(B||void 0===y&&R)&&r().createElement(r().Fragment,null,r().createElement(q,{pageTitle:a("instance.loadingInstance"),hasActionDropdown:!0,hasLabel:!1,totalTabs:1}),r().createElement(s.PageSection,null,r().createElement(s.TabContent,{id:"instance-skeleton__page__tabs-processors"},r().createElement($,{hasActionColumn:!0,columns:V,totalRows:T,customToolbarElement:A})))),L&&(null==F?void 0:F.items)&&r().createElement(r().Fragment,null,r().createElement(s.Drawer,{isExpanded:D},r().createElement(s.DrawerContent,{"data-ouia-component-id":"instance-drawer",panelContent:r().createElement(f,{onClosingDetails:()=>x(!1),instance:L})},r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"breadcrumb"},r().createElement(i,{path:[{label:a("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=L.name)&&void 0!==e?e:""}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Split,null,r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instance-name",component:"h1"},L.name))),r().createElement(s.SplitItem,null,r().createElement(s.Dropdown,{ouiaId:"actions",onSelect:()=>w(!1),toggle:r().createElement(s.DropdownToggle,{ouiaId:"actions",onToggle:e=>w(e),toggleIndicator:c.CaretDownIcon},a("common.actions")),isOpen:P,dropdownItems:[r().createElement(s.DropdownItem,{key:"details",ouiaId:"details",onClick:()=>{x(!0)}},a("common.details")),r().createElement(s.DropdownItem,{key:"delete",ouiaId:"delete",onClick:()=>{X(!0)},isDisabled:!H(L.status)},a("common.delete"))]})))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,type:"tabs"},r().createElement(s.Tabs,{className:"instance-page__tabs",ouiaId:"instance-details",usePageInsets:!0,activeKey:k,onSelect:(e,t)=>{C(t)}},r().createElement(s.Tab,{eventKey:0,ouiaId:"processors",tabContentId:"instance-page__tabs-processors",tabContentRef:p,title:r().createElement(s.TabTitleText,null,a("common.processors"))}))),r().createElement(s.PageSection,null,r().createElement(s.TabContent,{eventKey:0,id:"instance-page__tabs-processors",ouiaId:"processors",ref:p,"aria-label":"Processors tab"},r().createElement(E,{columns:V,customToolbarElement:A,rows:F.items,tableLabel:a("openbridgeTempDictionary:processor.processorsListTable"),isLoading:R,onPaginationChange:K,pageNumber:g,pageSize:T,totalRows:null!=y?y:0,renderActions:({row:e,ActionsColumn:t})=>r().createElement(t,{items:se(e)})},r().createElement(s.EmptyState,{variant:"large"},r().createElement(s.EmptyStateIcon,{icon:c.PlusCircleIcon}),r().createElement(s.Title,{headingLevel:"h4",size:"lg"},a("processor.noProcessors")))))))),r().createElement(W,{instanceId:L.id,instanceName:L.name,showDeleteModal:Z,onCanceled:()=>X(!1),onDeleted:ae}),r().createElement(J,{bridgeId:t,processorId:Q,processorName:ee,showDeleteModal:ne,onCanceled:()=>re(!1),onDeleted:oe})))},X=e=>{const{isLoading:t,isModalOpen:a,onClose:o,onCreate:i,existingInstanceName:c}=e,[m,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(null),{t:g}=(0,l.useTranslation)("openbridgeTempDictionary"),E="create-instance-form",b=(0,n.useCallback)((()=>""===m.trim()?(p(g("common.required")),!1):c&&m.trim()===c?(p(g("instance.errors.invalidName")),!1):(p(null),!0)),[m,g,c]),h=(0,n.useCallback)((e=>{e.preventDefault(),b()&&i(m.trim())}),[m,i,b]),f=(0,n.useCallback)((e=>{d(e),c&&b()}),[c,b]);return(0,n.useEffect)((()=>{c&&b()}),[c,b]),(0,n.useEffect)((()=>{a&&(d(""),p(null))}),[a]),r().createElement(s.Modal,{isOpen:a,title:g("instance.createASEInstance"),ouiaId:"create-instance",width:640,onClose:o,actions:[r().createElement(s.Button,{key:"submit",ouiaId:"submit",variant:"primary",type:"submit",form:E,isDisabled:t,spinnerAriaValueText:g("common.submittingRequest"),isLoading:t},g("instance.createSEInstance")),r().createElement(s.Button,{key:"cancel",ouiaId:"cancel",variant:"link",onClick:o},g("common.cancel"))]},r().createElement(s.Form,{id:E,onSubmit:h},r().createElement(s.FormGroup,{label:g("common.name"),isRequired:!0,fieldId:"instance-name",validated:u?"error":"default",helperTextInvalid:u},r().createElement(s.TextInput,{isRequired:!0,ouiaId:"new-name",type:"text",maxLength:255,id:"instance-name",name:"instance-name",value:m,onChange:f,onBlur:b,validated:u?"error":"default",isDisabled:t})),r().createElement(s.AlertGroup,null,r().createElement(s.Alert,{variant:"info",ouiaId:"info-instance-available-soon",isInline:!0,isPlain:!0,title:g("instance.instanceWillBeAvailableShortly")}))))};const Q=()=>{const{t:e}=(0,l.useTranslation)(["openbridgeTempDictionary"]),[t,a]=(0,n.useState)(0),[i,m]=(0,n.useState)(10),[d,u]=(0,n.useState)(),[p,g]=(0,n.useState)(!1),[h,T]=(0,n.useState)(),S=[{accessor:"name",label:e("common.name"),formatter:(e,t)=>{var a,n,s;const l=null!==(n=null===(a=t)||void 0===a?void 0:a.id)&&void 0!==n?n:"";return(null===(s=t)||void 0===s?void 0:s.status)===N?r().createElement(o.Link,{"data-testid":"tableInstances-linkInstance",to:`/instance/${l}`},e):r().createElement(r().Fragment,null,e)}},{accessor:"status",label:e("common.status"),formatter:e=>{var t;const a=null!==(t=e)&&void 0!==t?t:"";return r().createElement(v,{status:a})}},{accessor:"submitted_at",label:e("common.submittedAt"),formatter:t=>{const a=new Date(t);return(0,b.Z)(a,new Date)+" "+e("common.ago")}}],{bridgeListResponse:I,isLoading:k,getBridges:C,error:P}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!0),l=(0,n.useRef)(),{getToken:i,apiBaseUrl:c}=(0,A.D)();return{getBridges:(0,n.useCallback)(((e,a,n=!1)=>{var o;s(!n),null===(o=l.current)||void 0===o||o.cancel();const m=y().CancelToken.source();l.current=m,new _(new G({accessToken:i,basePath:c})).getBridges(e,a,{cancelToken:m.token}).then((e=>{t(e.data),s(!1)})).catch((e=>{y().isCancel(e)||(r(e),s(!1))}))}),[i,c]),isLoading:o,bridgeListResponse:e,error:a}}(),w=(0,n.useCallback)((()=>C(t,i,!0)),[t,i,C]);M((()=>w()),1e4),(0,n.useEffect)((()=>{C(0,10)}),[C]),(0,n.useEffect)((()=>{var e,t;I&&(a(null!==(e=I.page)&&void 0!==e?e:0),u(null!==(t=I.total)&&void 0!==t?t:0))}),[I]),(0,n.useEffect)((()=>{P&&console.error(P)}),[P]);const[D,x]=(0,n.useState)(!1),[O,L]=(0,n.useState)(""),[B,j]=(0,n.useState)(""),{error:F,isLoading:R,createBridge:V,bridge:U}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!1),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{createBridge:e=>{s(!0),t(void 0),r(void 0),new _(new G({accessToken:l,basePath:i})).createBridge(e).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,bridge:e,error:a}}(),q=(0,n.useCallback)((e=>{L(e),V({name:e})}),[V]);(0,n.useEffect)((()=>{U&&(z(),C(t,i))}),[U,C,t,i]),(0,n.useEffect)((()=>{var e;F&&y().isAxiosError(F)&&"OPENBRIDGE-1"===(null===(e=F.response)||void 0===e?void 0:e.data).code&&j(O)}),[F,O]);const z=()=>{x(!1),L(""),j("")},[K,J]=(0,n.useState)(!1),[Z,Q]=(0,n.useState)(),[Y,ee]=(0,n.useState)(),te=(0,n.useCallback)((()=>{Q(""),ee("")}),[]),ae=(0,n.useCallback)((()=>{J(!1),C(t,i),te()}),[t,i,C,te]),ne=(0,n.useCallback)((()=>{J(!1),te()}),[te]),re=t=>[{title:e("common.details"),onClick:()=>{T(t.originalData),g(!0)}},{title:e("common.delete"),onClick:()=>{const e=t.originalData.id,a=t.originalData.name;e&&a&&((e,t)=>{Q(e),ee(t),J(!0)})(e,a)},isDisabled:!H(t.originalData.status)}],oe=r().createElement(r().Fragment,null,r().createElement(s.Button,{ouiaId:"create-smart-event-instance",onClick:()=>x(!0)},e("instance.createSEInstance")),r().createElement(X,{isLoading:R,isModalOpen:D,onClose:z,onCreate:q,existingInstanceName:B})),se=(0,n.useCallback)(((e,t)=>{const n=t===i?e:0;a(n),m(t),C(n,t)}),[i,C]),le=r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.TextContent,null,r().createElement(s.Text,{ouiaId:"instances-page-title",component:"h1"},e("openbridgeTempDictionary:instance.instancesListPageTitle")))),r().createElement(s.PageSection,null,void 0===d&&k&&r().createElement($,{columns:S,customToolbarElement:oe,totalRows:i,hasActionColumn:!0}),(null==I?void 0:I.items)&&r().createElement(E,{columns:S,customToolbarElement:oe,isLoading:k,rows:I.items,totalRows:null!=d?d:0,pageNumber:t,pageSize:i,onPaginationChange:se,tableLabel:e("openbridgeTempDictionary:instance.instancesListTable"),renderActions:({row:e,ActionsColumn:t})=>r().createElement(t,{items:re(e)})},r().createElement(s.EmptyState,{variant:"large"},r().createElement(s.EmptyStateIcon,{icon:c.PlusCircleIcon}),r().createElement(s.Title,{headingLevel:"h4",size:"lg"},e("instance.noInstances")),r().createElement(s.EmptyStateBody,null,e("common.quickStartAccess"))))));return r().createElement(r().Fragment,null,r().createElement(s.Drawer,{isExpanded:p},r().createElement(s.DrawerContent,{"data-ouia-component-id":"instance-drawer",panelContent:h?r().createElement(f,{onClosingDetails:()=>g(!1),instance:h}):null},le)),r().createElement(W,{showDeleteModal:K,instanceId:Z,instanceName:Y,onDeleted:ae,onCanceled:ne}))},Y=e=>{const{filters:t,onChange:a}=e,n=(e,n)=>{a(t.map(((t,a)=>a===n?e:t)))},{t:o}=(0,l.useTranslation)(["openbridgeTempDictionary"]),i=[{value:"",label:o("common.selectType"),isPlaceholder:!0},{value:"StringEquals",label:o("processor.stringEquals"),isPlaceholder:!1},{value:"StringContains",label:o("processor.stringContains"),isPlaceholder:!1},{value:"StringBeginsWith",label:o("processor.stringBeginsWith"),isPlaceholder:!1},{value:"ValuesIn",label:o("processor.valuesIn"),isPlaceholder:!1}];return r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Stack,{hasGutter:!0},t.map(((e,l)=>r().createElement(s.StackItem,{key:`filter-${e.type}-${l}`,"data-ouia-component-id":`item-${l}`,"data-testid":"filter-item"},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-key-${l}`,label:o("common.key")},r().createElement(s.TextInput,{type:"text",id:`filter-key-${l}`,ouiaId:"filter-key",name:`filter-key-${l}`,"aria-describedby":`filter-key-${l}`,value:e.key,onChange:t=>n(Object.assign(Object.assign({},e),{key:t}),l)}))),r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-type-${l}`,label:o("common.type")},r().createElement(s.FormSelect,{id:`filter-type-${l}`,ouiaId:"filter-type","aria-label":o("common.type"),value:e.type,onChange:t=>n(Object.assign(Object.assign({},e),{type:t}),l)},i.map(((e,t)=>r().createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label,isPlaceholder:e.isPlaceholder})))))),r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.FormGroup,{fieldId:`filter-value-${l}`,label:o("common.value")},r().createElement(s.TextInput,{type:"text",id:`filter-value-${l}`,ouiaId:"filter-value",name:`filter-value-${l}`,"aria-describedby":`filter-value-${l}`,value:e.value,onChange:t=>n(Object.assign(Object.assign({},e),{value:t}),l)}))),r().createElement(s.SplitItem,null,r().createElement(s.Flex,{direction:{default:"column"},justifyContent:{default:"justifyContentFlexEnd"},style:{height:"100%"}},r().createElement(s.FlexItem,null,r().createElement(s.Button,{variant:"plain",ouiaId:"delete-item","aria-label":o("processor.deleteFilter"),onClick:()=>(e=>{a(t.filter(((t,a)=>a!==e)))})(l),isDisabled:1===t.length},r().createElement(c.TrashAltIcon,null))))))))))),r().createElement(s.StackItem,null,r().createElement(s.Button,{variant:"link",ouiaId:"add-filter",icon:r().createElement(c.PlusCircleIcon,null),onClick:()=>{a([...t,{key:"",type:"",value:""}])},isInline:!0},o("processor.addFilter"))))};var ee=a(49399);function te(){const{t:e}=(0,l.useTranslation)(["openbridgeTempDictionary"]);return{isRequired:t=>({isValid:t.trim().length>0,errorMessage:e("common.required")}),isHTTPUrl:t=>{if(0===t.trim().length)return{isValid:!1,errorMessage:e("common.required")};return{isValid:(e=>{let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol})(t),errorMessage:e("processor.errors.invalidUrl")}}}}var ae=a(96486);function ne(e,t){const[a,r]=(0,n.useState)({isValid:void 0,errors:{}}),{t:o}=(0,l.useTranslation)(["openbridgeTempDictionary"]),s=(0,n.useCallback)((e=>{r((t=>Object.assign(Object.assign({},t),{errors:(0,ae.omit)(t.errors,e)})))}),[]),i=(0,n.useCallback)((()=>{var t;return 0===(null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"").trim().length?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{type:o("common.required")})}))),!1):(s("type"),!0)}),[e,s,o]),c=(0,n.useCallback)(((a,n)=>{const o=t.find((e=>e.name===a));if(e&&o){const t=o.fields.find((e=>e.name===n));if(t){const a=t.validate(e.parameters[n]);return a.isValid?s(t.name):r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{[n]:a.errorMessage})}))),a.isValid}}return!1}),[e,t,s]);return{validation:a,validate:(0,n.useCallback)((()=>{const a=[i];if(null==e?void 0:e.type){const n=t.find((t=>t.name===e.type));n&&n.fields.map((t=>{a.push((()=>c(e.type,t.name)))}))}const n=a.reduce(((e,t)=>t()&&e),!0);return r((e=>Object.assign(Object.assign({},e),{isValid:n}))),n}),[e,t,i,c]),resetValidation:s,validateField:c}}const re=e=>{var t,a,o;const{action:i,onChange:c,registerValidation:m}=e,[d,u]=(0,n.useState)(null!==(t=null==i?void 0:i.type)&&void 0!==t?t:""),[p,g]=(0,n.useState)(null!==(a=null==i?void 0:i.parameters)&&void 0!==a?a:{}),{t:E}=(0,l.useTranslation)(["openbridgeTempDictionary"]),{isRequired:b,isHTTPUrl:h}=te(),f=[{name:"",label:E("processor.selectAction"),isPlaceholder:!0,fields:[]},{name:"KafkaTopic",label:E("processor.actions.KafkaTopic"),isPlaceholder:!1,fields:[{name:"topic",label:E("common.kafkaTopic"),validate:b}]},{name:"Webhook",label:E("processor.actions.Webhook"),isPlaceholder:!1,fields:[{name:"endpoint",label:E("common.endpoint"),validate:h}]},{name:"SendToBridge",label:E("processor.actions.SendToBridge"),isPlaceholder:!1,fields:[{name:"bridgeId",label:E("instance.instanceId"),validate:b}]},{name:"Slack",label:E("processor.actions.Slack"),isPlaceholder:!1,fields:[{name:"channel",label:E("processor.channel"),validate:b},{name:"webhookUrl",label:E("processor.webhookUrl"),validate:h}]}],{validate:v,validation:T,resetValidation:S,validateField:y}=ne(i,f);return(0,n.useEffect)((()=>{m&&m(v)}),[v,m]),(0,n.useEffect)((()=>{i&&(u(i.type),g(i.parameters))}),[i]),r().createElement(r().Fragment,null,r().createElement(s.FormGroup,{fieldId:"action-type",label:E("processor.actionType"),isRequired:!0,helperTextInvalid:T.errors.type,validated:T.errors.type?"error":"default",className:T.errors.type&&"processor-field-error"},r().createElement(s.FormSelect,{id:"action-type",ouiaId:"action-type","aria-label":E("processor.actionType"),isRequired:!0,value:d,onChange:e=>(e=>{u(e);const t={};switch(e){case"KafkaTopic":t.topic="";break;case"Webhook":t.endpoint="";break;case"SendToBridge":t.bridgeId="";break;case"Slack":t.channel="",t.webhookUrl=""}c({type:e,parameters:t}),e&&S("type")})(e),validated:T.errors.type?"error":"default"},f.map(((e,t)=>r().createElement(s.FormSelectOption,{key:t,value:e.name,label:e.label,isPlaceholder:e.isPlaceholder}))))),""===d&&r().createElement(s.FormGroup,{fieldId:"action-config",label:E("processor.actionConfiguration")},r().createElement(s.TextInput,{type:"text",id:"action-config",ouiaId:"missing-actions",name:"action-config","aria-describedby":"action-config",isDisabled:!0})),""!==d&&r().createElement(r().Fragment,null,null===(o=f.find((e=>e.name===d)))||void 0===o?void 0:o.fields.map((e=>{var t;return r().createElement(s.FormGroup,{key:e.name,fieldId:e.name,label:e.label,isRequired:!0,helperTextInvalid:T.errors[e.name],validated:T.errors[e.name]?"error":"default",className:T.errors[e.name]&&"processor-field-error"},r().createElement(s.TextInput,{type:"text",id:e.name,ouiaId:e.name,name:e.name,"aria-describedby":e.name,isRequired:!0,value:null!==(t=p[e.name])&&void 0!==t?t:"",validated:T.errors[e.name]?"error":"default",onChange:t=>{(e=>{g(e),c({type:d,parameters:e})})(Object.assign(Object.assign({},p),{[e.name]:t}))},onBlur:()=>{y(d,e.name)}}))}))))},oe=e=>{var t,a,o;const{source:i,onChange:c,registerValidation:m}=e,[d,u]=(0,n.useState)(null!==(t=null==i?void 0:i.type)&&void 0!==t?t:""),[p,g]=(0,n.useState)(null!==(a=null==i?void 0:i.parameters)&&void 0!==a?a:{}),{t:E}=(0,l.useTranslation)(["openbridgeTempDictionary"]),{isRequired:b}=te(),h=[{name:"",label:E("processor.selectSource"),isPlaceholder:!0,fields:[]},{name:"Slack",label:E("processor.sources.Slack"),isPlaceholder:!1,fields:[{name:"channel",label:E("processor.channel"),validate:b},{name:"token",label:E("processor.token"),validate:b}]}],{validate:f,validation:v,resetValidation:T,validateField:S}=ne(i,h);return(0,n.useEffect)((()=>{m&&m(f)}),[f,m]),(0,n.useEffect)((()=>{i&&(u(i.type),g(i.parameters))}),[i]),r().createElement(r().Fragment,null,r().createElement(s.FormGroup,{fieldId:"source-type",label:E("processor.sourceType"),isRequired:!0,helperTextInvalid:v.errors.type,validated:v.errors.type?"error":"default",className:v.errors.type&&"processor-field-error"},r().createElement(s.FormSelect,{id:"source-type",ouiaId:"source-type","aria-label":E("processor.sourceType"),isRequired:!0,value:d,onChange:e=>(e=>{u(e);const t={};"Slack"===e&&(t.channel="",t.token="");c(Object.assign(Object.assign({},i),{type:e,parameters:t})),e&&T("type")})(e),validated:v.errors.type?"error":"default"},h.map(((e,t)=>r().createElement(s.FormSelectOption,{key:t,value:e.name,label:e.label,isPlaceholder:e.isPlaceholder}))))),""===d&&r().createElement(s.FormGroup,{fieldId:"source-parameters",label:E("processor.sourceConfiguration")},r().createElement(s.TextInput,{type:"text",id:"source-parameters",ouiaId:"missing-source-parameters",name:"source-parameters","aria-describedby":"source-parameters",isDisabled:!0})),""!==d&&r().createElement(r().Fragment,null,null===(o=h.find((e=>e.name===d)))||void 0===o?void 0:o.fields.map((e=>{var t;return r().createElement(s.FormGroup,{key:e.name,fieldId:e.name,label:e.label,isRequired:!0,helperTextInvalid:v.errors[e.name],validated:v.errors[e.name]?"error":"default",className:v.errors[e.name]&&"processor-field-error"},r().createElement(s.TextInput,{type:"text",id:e.name,ouiaId:e.name,name:e.name,"aria-describedby":e.name,isRequired:!0,value:null!==(t=p[e.name])&&void 0!==t?t:"",onChange:t=>{(e=>{g(e),c(Object.assign(Object.assign({},i),{type:d,parameters:e}))})(Object.assign(Object.assign({},p),{[e.name]:t}))},onBlur:()=>{S(d,e.name)}}))}))))};const se=e=>{var t,a,o,i,c,m;const{existingProcessorName:d,isLoading:u,saveButtonLabel:p,onSave:g,onCancel:E,processor:b,processorTypeSection:h}=e,{t:f}=(0,l.useTranslation)(["openbridgeTempDictionary"]),[v,T]=(0,n.useState)(null!==(t=null==b?void 0:b.type)&&void 0!==t?t:""),[S,y]=(0,n.useState)(null!==(a=null==b?void 0:b.name)&&void 0!==a?a:""),[I,k]=(0,n.useState)(null!==(o=null==b?void 0:b.filters)&&void 0!==o?o:[{key:"",type:"",value:""}]),[C,P]=(0,n.useState)(null!==(i=null==b?void 0:b.transformationTemplate)&&void 0!==i?i:""),[w,D]=(0,n.useState)(null!==(c=null==b?void 0:b.action)&&void 0!==c?c:{type:"",parameters:{}}),[x,O]=(0,n.useState)(null!==(m=null==b?void 0:b.source)&&void 0!==m?m:{type:"",parameters:{}}),[L,B]=(0,n.useState)({name:S,type:v,filters:I,transformationTemplate:C,action:w,source:x}),[j,_]=(0,n.useState)(!1),{registerValidateConfig:F,validateName:R,validation:G,validate:N,resetValidation:V}=function(e,t){const[a,r]=(0,n.useState)({isValid:void 0,errors:{}}),{name:o,type:s}=e,{t:i}=(0,l.useTranslation)(["openbridgeTempDictionary"]),c=(0,n.useRef)(),m=e=>0===e.trim().length,d=(0,n.useCallback)((e=>{r((t=>Object.assign(Object.assign({},t),{errors:(0,ae.omit)(t.errors,e)})))}),[]),u=(0,n.useCallback)((()=>m(o)?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{name:i("common.required")})}))),!1):t&&o.trim()===t?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{name:i("processor.errors.invalidName")})}))),!1):(d("name"),!0)),[o,d,t,i]),p=(0,n.useCallback)((()=>m(s)?(r((e=>Object.assign(Object.assign({},e),{errors:Object.assign(Object.assign({},e.errors),{processorType:i("processor.errors.missingProcessorType")})}))),!1):(d("processorType"),!0)),[s,d,i]);return{validate:(0,n.useCallback)((()=>{const e=[u,p,c.current].reduce(((e,t)=>{var a;return(null!==(a=null==t?void 0:t())&&void 0!==a?a:e)&&e}),!0);return r((t=>Object.assign(Object.assign({},t),{isValid:e}))),e}),[u,p,c]),validation:a,validateName:u,validateProcessorType:p,registerValidateConfig:e=>{c.current=e},resetValidation:d}}(L,d);(0,n.useEffect)((()=>{B({name:S,type:v,filters:I,transformationTemplate:C,action:w,source:x})}),[S,v,I,C,w,x]);return(0,n.useEffect)((()=>{d&&(_(!0),N())}),[d,N]),(0,n.useEffect)((()=>{var e;j&&(null===(e=document.querySelector(".processor-field-error"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),_(!1))}),[j]),r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"},className:"processor-edit__page-section"},r().createElement("section",{className:"processor-edit__container"},r().createElement(s.Flex,{direction:{default:"column"},style:{height:"100%"}},r().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"},flexWrap:{default:"nowrap"},className:"processor-edit__outer-wrap"},r().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"},className:"processor-edit__inner-wrap"},r().createElement(s.FlexItem,{grow:{default:"grow"},className:"processor-edit__content-wrap"},r().createElement(s.Form,{className:"processor-edit__form"},r().createElement(s.FormSection,{title:f("processor.generalInformation"),titleElement:"h2"},h||r().createElement(s.FormGroup,{label:f("processor.selectProcessorType"),fieldId:"processor-type",isRequired:!0,helperTextInvalid:G.errors.processorType,validated:G.errors.processorType?"error":"default",className:G.errors.processorType&&"processor-field-error"},r().createElement(s.Grid,{hasGutter:!0,className:"processor-form__type-selection"},r().createElement(s.GridItem,{span:6},r().createElement(s.Tile,{title:f("processor.sourceProcessor"),isSelected:"source"===v,style:{height:"100%"},onClick:()=>{T("source"),V("processorType")}},f("processor.sourceProcessorDescription"))),r().createElement(s.GridItem,{span:6},r().createElement(s.Tile,{title:f("processor.sinkProcessor"),style:{width:"100%",height:"100%"},isSelected:"sink"===v,onClick:()=>{T("sink"),V("processorType")}},f("processor.sinkProcessorDescription"))))),r().createElement(s.FormGroup,{fieldId:"processor-name",label:f("processor.processorName"),isRequired:!0,helperTextInvalid:G.errors.name,validated:G.errors.name?"error":"default",className:G.errors.name&&"processor-field-error"},r().createElement(s.TextInput,{type:"text",id:"processor-name",ouiaId:"processor-name",name:"processor-name","aria-describedby":"processor-name",isRequired:!0,maxLength:255,value:S,onChange:y,validated:G.errors.name?"error":"default",onBlur:()=>{R()}}))),""!==v&&r().createElement(r().Fragment,null,"source"===v&&r().createElement(s.FormSection,{title:f("processor.source")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"source-type-description"},f("processor.selectSourceProcessorTypeDescription"))),r().createElement(oe,{source:x,onChange:O,registerValidation:F})),r().createElement(s.FormSection,{title:f("processor.filters"),titleElement:"h2"},r().createElement(Y,{filters:I,onChange:k})),r().createElement(s.FormSection,{title:f("processor.transformation")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"transformation-description"},f("processor.addTransformationDescription"))),r().createElement(ee.CodeEditor,{id:"transformation-template",height:"300px",isLineNumbersVisible:!0,code:C,onChange:P,options:{scrollbar:{alwaysConsumeMouseWheel:!1}}})),"sink"===v&&r().createElement(s.FormSection,{title:f("processor.action")},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"p",ouiaId:"action-description"},f("processor.selectActionDescription"))),r().createElement(re,{action:w,onChange:D,registerValidation:F})),""!==v&&r().createElement(s.AlertGroup,{className:"processor-edit__form__notice"},r().createElement(s.Alert,{variant:"info",ouiaId:"info-processor-available-soon",isInline:!0,isPlain:!0,title:f("processor.processorWillBeAvailableShortly")})))))),r().createElement(s.Flex,{flexWrap:{default:"wrap"},shrink:{default:"shrink"}},r().createElement(s.ActionGroup,{className:"processor-edit__actions"},r().createElement(s.Button,{variant:"primary",ouiaId:"submit",onClick:()=>{if(_(!0),N()&&L){const e=(e=>{const t={name:e.name};if("sink"===e.type?t.action=e.action:t.source=e.source,e.filters&&e.filters.length>0){const a=e.filters.filter((e=>e.type&&e.value&&e.key));a.length>0&&(t.filters=a)}return e.transformationTemplate&&e.transformationTemplate.trim().length>0&&(t.transformationTemplate=e.transformationTemplate.trim()),t})(L);g(e)}},isLoading:u,isDisabled:u},p),r().createElement(s.Button,{variant:"link",ouiaId:"cancel",onClick:E,isDisabled:u},f("common.cancel")))))))))};const le=()=>r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"},className:"processor-edit__page-section"},r().createElement("section",{className:"processor-edit__form"},r().createElement(s.Flex,{direction:{default:"column"},spaceItems:{default:"spaceItemsXl"}},r().createElement(s.FlexItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"30%"})),r().createElement(s.FlexItem,null,r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"20%"})),r().createElement(s.StackItem,null,r().createElement(s.Grid,{hasGutter:!0},r().createElement(s.GridItem,{span:6},r().createElement(s.Skeleton,{shape:"square",width:"100%",height:"110px"})),r().createElement(s.GridItem,{span:6},r().createElement(s.Skeleton,{shape:"square",width:"100%",height:"110px"})))))),r().createElement(s.FlexItem,null,r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"sm",width:"20%"})),r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"100%"}))))))),ie=()=>{var e;const{instanceId:t}=(0,o.useParams)(),[a,c]=(0,n.useState)(),[m,d]=(0,n.useState)(),u=(0,o.useHistory)(),p=(0,n.useCallback)((()=>u.push(`/instance/${t}`)),[t,u]),g=(0,n.useCallback)((()=>u.push("/")),[u]),{t:E}=(0,l.useTranslation)(["openbridgeTempDictionary"]),{getBridge:b,bridge:h,isLoading:f,error:v}=U();(0,n.useEffect)((()=>{b(t)}),[b,t]),(0,n.useEffect)((()=>{v&&g()}),[v,g]);const{addProcessorToBridge:T,isLoading:S,processor:I,error:k}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!1),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{addProcessorToBridge:(e,a)=>{t(void 0),r(void 0),s(!0),new R(new G({accessToken:l,basePath:i})).addProcessorToBridge(e,a).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,processor:e,error:a}}();return(0,n.useEffect)((()=>{I&&p()}),[I,p]),(0,n.useEffect)((()=>{var e;k&&y().isAxiosError(k)&&"OPENBRIDGE-1"===(null===(e=k.response)||void 0===e?void 0:e.data).code&&c(null==m?void 0:m.name)}),[k,m]),r().createElement(r().Fragment,null,f&&r().createElement(r().Fragment,null,r().createElement(q,{pageTitle:E("instance.processor.loadingProcessor"),hasActionDropdown:!1,hasLabel:!1}),r().createElement(le,null)),h&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{type:"breadcrumb"},r().createElement(i,{path:[{label:E("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=h.name)&&void 0!==e?e:"",linkTo:`/instance/${t}`},{label:E("processor.createProcessor")}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0},r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1",ouiaId:"page-name"},E("processor.createProcessor")))),r().createElement(se,{saveButtonLabel:E("common.create"),onSave:e=>{d(e),T(t,e)},onCancel:p,isLoading:S,existingProcessorName:a})))};var ce=a(49150),me=a.n(ce),de=a(72836),ue=a.n(de);const pe=e=>{var t,a;const{processor:n}=e,{t:o}=(0,l.useTranslation)(["openbridgeTempDictionary"]);return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"type"},o("processor.processorType")))),r().createElement(s.StackItem,null,r().createElement(s.Label,{color:"blue","data-testid":"processor-type-label"},o(`processor.${n.type}`))))),"source"===n.type&&r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"source-section"},o("processor.source")))),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"source-type"},r().createElement(s.DescriptionListTerm,null,o("processor.sourceType")),r().createElement(s.DescriptionListDescription,null,n.source.type)),Object.keys(n.source.parameters).map((e=>r().createElement(s.DescriptionListGroup,{key:e},r().createElement(s.DescriptionListTerm,null,o(`processor.${e}`)),r().createElement(s.DescriptionListDescription,null,n.source.parameters[e])))))))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"filters-section"},o("processor.filters")))),r().createElement(s.StackItem,null,(null===(t=n.filters)||void 0===t?void 0:t.length)?r().createElement(m.TableComposable,{variant:"compact",ouiaId:"filters-descriptions",borders:!0,className:"processor-detail__filters","data-ouia-component-id":"filters"},r().createElement(m.Thead,null,r().createElement(m.Tr,{ouiaId:"table-head"},r().createElement(m.Th,null,o("common.key")),r().createElement(m.Th,null,o("common.type")),r().createElement(m.Th,null,o("common.value")))),r().createElement(m.Tbody,null,null===(a=n.filters)||void 0===a?void 0:a.map((e=>r().createElement(m.Tr,{key:e.key,ouiaId:e.key},r().createElement(m.Td,null,e.key),r().createElement(m.Td,null,o(`processor.${e.type}`)),r().createElement(m.Td,null,e.value)))))):r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"no-filters"},o("processor.noFilters")))))),"sink"===n.type&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"transformation-section"},o("processor.transformation")))),n.transformationTemplate?r().createElement(r().Fragment,null,r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"transformation-template"},o("processor.transformationTemplate")))),r().createElement(s.StackItem,null,r().createElement(s.CodeBlock,{className:"processor-detail__transformation-template"},r().createElement(s.CodeBlockCode,null,n.transformationTemplate)))):r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.p,ouiaId:"no-transformation"},o("processor.noTransformationTemplate")))))),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:s.TextVariants.h2,ouiaId:"action-section"},o("processor.action")))),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"action-type"},r().createElement(s.DescriptionListTerm,null,o("processor.actionType")),r().createElement(s.DescriptionListDescription,null,o(`processor.actions.${n.action.type}`))),Object.keys(n.action.parameters).map((e=>r().createElement(s.DescriptionListGroup,{key:e},r().createElement(s.DescriptionListTerm,null,o(`processor.${e}`)),r().createElement(s.DescriptionListDescription,null,n.action.parameters[e]))))))))))};const ge=()=>{const{t:e}=(0,l.useTranslation)(["openbridgeTempDictionary"]);return r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{width:"150px",screenreaderText:e("processor.loadingProcessorType")})),r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{width:"80px"})))),r().createElement(Ee,null),r().createElement(Ee,{isLarge:!0}),r().createElement(Ee,{isLarge:!0}))},Ee=({isLarge:e=!1})=>r().createElement(s.PageSection,{variant:s.PageSectionVariants.light},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.Skeleton,{fontSize:"xl",width:"100px"})),r().createElement(s.StackItem,null,r().createElement(s.DescriptionList,null,r().createElement(s.DescriptionListGroup,{key:"action-type"},r().createElement(s.DescriptionListTerm,null,r().createElement(s.Skeleton,{fontSize:"md",width:"80px"})),r().createElement(s.DescriptionListDescription,null,r().createElement(s.Skeleton,{fontSize:"md",width:e?"600px":"160px"})))))));const be=()=>{var e,t,a;const{instanceId:m,processorId:d}=(0,o.useParams)(),u=(0,o.useHistory)(),{t:p}=(0,l.useTranslation)(["openbridgeTempDictionary"]),g=(0,n.useCallback)((()=>u.push(`/instance/${m}`)),[u,m]),E=(0,n.useCallback)((()=>u.push("/")),[u]),[b,h]=(0,n.useState)(!1),[f,T]=(0,n.useState)(),[S,I]=(0,n.useState)(!1),[k,C]=(0,n.useState)(),[P,w]=(0,n.useState)(),{getBridge:D,bridge:x,isLoading:O,error:L}=U();(0,n.useEffect)((()=>{D(m)}),[D,m]);const{getProcessor:B,processor:j,isLoading:_,error:F}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!0),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{getProcessor:(0,n.useCallback)(((e,a)=>{new R(new G({accessToken:l,basePath:i})).getProcessor(e,a).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))}),[l,i]),isLoading:o,processor:e,error:a}}();(0,n.useEffect)((()=>{B(m,d)}),[B,m,d]);const{updateProcessor:V,processor:$,isLoading:z,error:M}=function(){const[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(),[o,s]=(0,n.useState)(!1),{getToken:l,apiBaseUrl:i}=(0,A.D)();return{updateProcessor:(e,a,n)=>{s(!0),r(void 0),t(void 0),new R(new G({accessToken:l,basePath:i})).updateProcessor(e,a,n).then((e=>t(e.data))).catch((e=>r(e))).finally((()=>s(!1)))},isLoading:o,processor:e,error:a}}();(0,n.useEffect)((()=>{T(j)}),[j]),(0,n.useEffect)((()=>{T($),h(!1)}),[$]),(0,n.useEffect)((()=>{var e;L&&(console.error(L),E()),F&&(console.error(F),g()),M&&y().isAxiosError(M)&&"OPENBRIDGE-1"===(null===(e=M.response)||void 0===e?void 0:e.data).code&&C(null==P?void 0:P.name)}),[L,F,E,g,M,null==P?void 0:P.name]);const K=(0,n.useCallback)(((e,t)=>ue()(e,t,((e,t)=>me()(e.name,t.name)&&me()(e.filters,t.filters)&&me()(e.transformationTemplate,t.transformationTemplate)&&me()(e.action,t.action)&&me()(e.source,t.source)))),[]),W=(0,n.useCallback)((e=>{f&&K(f,e)?h(!1):(w(e),V(m,d,e))}),[f,m,d,K,V]),Z=(0,n.useCallback)((e=>r().createElement(s.Stack,null,r().createElement(s.StackItem,null,r().createElement(s.FormGroup,{label:p("processor.processorType"),fieldId:"processor-type"})),r().createElement(s.StackItem,null,r().createElement(s.Label,{color:"blue","data-testid":"processor-type-label"},e.type&&p(`processor.${e.type}`))))),[p]),[X,Q]=(0,n.useState)(!1),Y=(0,n.useCallback)((()=>{Q(!1),g()}),[g]),ee=[r().createElement(s.DropdownItem,{key:"delete",ouiaId:"delete",component:"button",onClick:()=>{Q(!0)},isDisabled:!f||!H(f.status)},p("processor.delete"))];return r().createElement(r().Fragment,null,(O||_)&&r().createElement(r().Fragment,null,r().createElement(q,{pageTitle:p("processor.loadingProcessor"),hasEditButton:!0,hasActionDropdown:!0,hasLabel:!0}),r().createElement(ge,null)),x&&f&&r().createElement(r().Fragment,null,r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0,type:"breadcrumb"},r().createElement(i,{path:[{label:p("instance.smartEventInstances"),linkTo:"/"},{label:null!==(e=x.name)&&void 0!==e?e:"",linkTo:`/instance/${m}`},{label:null!==(t=f.name)&&void 0!==t?t:""}]})),r().createElement(s.PageSection,{variant:s.PageSectionVariants.light,hasShadowBottom:!0},r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,{isFilled:!0},r().createElement(s.Stack,{hasGutter:!0},r().createElement(s.StackItem,null,r().createElement(s.TextContent,null,r().createElement(s.Text,{component:"h1",ouiaId:"processor-name"},f.name))),r().createElement(s.StackItem,null,r().createElement(v,{status:null!==(a=f.status)&&void 0!==a?a:""})))),!b&&r().createElement(s.SplitItem,null,r().createElement(s.Split,{hasGutter:!0},r().createElement(s.SplitItem,null,r().createElement(s.Button,{isAriaDisabled:f.status!==N,ouiaId:"edit",onClick:()=>h(!0)},p("common.edit"))),r().createElement(s.SplitItem,null,r().createElement(s.Dropdown,{ouiaId:"processor-actions",onSelect:()=>{I(!S)},alignments:{sm:"right"},toggle:r().createElement(s.DropdownToggle,{id:"toggle-id",ouiaId:"actions-toggle",onToggle:e=>{I(e)},toggleIndicator:c.CaretDownIcon},p("common.actions")),isOpen:S,dropdownItems:ee})))))),b?r().createElement(se,{processorTypeSection:Z(f),processor:f,isLoading:z,saveButtonLabel:p("common.save"),onSave:W,onCancel:()=>h(!1),existingProcessorName:k}):r().createElement(r().Fragment,null,r().createElement(pe,{processor:f}),r().createElement(J,{showDeleteModal:X,bridgeId:x.id,processorId:f.id,processorName:f.name,onDeleted:Y,onCanceled:()=>Q(!1)}))))},he=()=>r().createElement(o.Switch,null,r().createElement(o.Route,{exact:!0,path:"/"},r().createElement(Q,null)),r().createElement(o.Route,{path:"/instance/:instanceId/processor/:processorId"},r().createElement(be,null)),r().createElement(o.Route,{path:"/instance/:instanceId/create-processor"},r().createElement(ie,null)),r().createElement(o.Route,{path:"/instance/:instanceId"},r().createElement(Z,null)),r().createElement(o.Route,{path:"*"},r().createElement(r().Fragment,null,r().createElement("p",null,"no match"))))},20807:(e,t,a)=>{a.d(t,{E:()=>s,D:()=>l});var n=a(75418),r=a.n(n);const o=(0,n.createContext)(null),s=({getToken:e,getUsername:t,apiBaseUrl:a,children:n})=>r().createElement(o.Provider,{value:{getToken:e,getUsername:t,apiBaseUrl:a}},n),l=()=>{const e=(0,n.useContext)(o);if(!e)throw new Error("useSmartEvents must be used inside an SmartEventsContextProvider");return Object.assign({},e)}}}]);
//# sourceMappingURL=123.2cc684f7.js.map